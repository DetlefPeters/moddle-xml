{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 73bb7261a3613c35fb7b","webpack:///./node_modules/lodash-es/identity.js","webpack:///./node_modules/lodash-es/isArray.js","webpack:///./node_modules/lodash-es/isArrayLike.js","webpack:///./node_modules/lodash-es/_baseEach.js","webpack:///./node_modules/lodash-es/_nativeKeys.js","webpack:///./node_modules/lodash-es/_baseRest.js","webpack:///./node_modules/lodash-es/assign.js","webpack:///./node_modules/lodash-es/_assignValue.js","webpack:///./node_modules/lodash-es/_baseAssignValue.js","webpack:///./node_modules/lodash-es/_objectToString.js","webpack:///./node_modules/lodash-es/forEach.js","webpack:///./node_modules/moddle/lib/ns.js","webpack:///./node_modules/moddle/lib/types.js","webpack:///./lib/common.js","webpack:///./lib/index.js","webpack:///./lib/reader.js","webpack:///./node_modules/lodash-es/defer.js","webpack:///./node_modules/lodash-es/_baseDelay.js","webpack:///./node_modules/lodash-es/_overRest.js","webpack:///./node_modules/lodash-es/_apply.js","webpack:///./node_modules/lodash-es/_defineProperty.js","webpack:///./node_modules/lodash-es/_getValue.js","webpack:///./node_modules/lodash-es/eq.js","webpack:///./node_modules/lodash-es/_copyObject.js","webpack:///./node_modules/lodash-es/_createAssigner.js","webpack:///./node_modules/lodash-es/stubFalse.js","webpack:///./node_modules/lodash-es/isFunction.js","webpack:///./node_modules/lodash-es/isObject.js","webpack:///./node_modules/lodash-es/isLength.js","webpack:///./node_modules/lodash-es/_overArg.js","webpack:///./node_modules/lodash-es/find.js","webpack:///./node_modules/lodash-es/_createFind.js","webpack:///./node_modules/lodash-es/findIndex.js","webpack:///./node_modules/lodash-es/_baseFindIndex.js","webpack:///./node_modules/lodash-es/_arrayEach.js","webpack:///./node_modules/lodash-es/_baseForOwn.js","webpack:///./node_modules/lodash-es/_baseFor.js","webpack:///./node_modules/lodash-es/_createBaseFor.js","webpack:///./node_modules/lodash-es/_createBaseEach.js","webpack:///./node_modules/lodash-es/reduce.js","webpack:///./node_modules/lodash-es/_arrayReduce.js","webpack:///./node_modules/lodash-es/_baseReduce.js","webpack:///./node_modules/tiny-stack/lib/tiny-stack.js","webpack:///./node_modules/sax/lib/sax.js","webpack:///external \"stream\"","webpack:///external \"string_decoder\"","webpack:///external {\"commonjs\":\"moddle\",\"commonjs2\":\"moddle\",\"amd\":\"moddle\",\"root\":\"Moddle\"}","webpack:///./lib/writer.js","webpack:///./node_modules/lodash-es/filter.js","webpack:///./node_modules/lodash-es/_arrayFilter.js","webpack:///./node_modules/lodash-es/_baseFilter.js","webpack:///./node_modules/lodash-es/isString.js","webpack:///./node_modules/lodash-es/isObjectLike.js","webpack:///./node_modules/lodash-es/map.js","webpack:///./node_modules/lodash-es/_arrayMap.js","webpack:///./node_modules/lodash-es/_baseMap.js"],"names":["identity","value","isArray","Array","isArrayLike","length","baseEach","nativeKeys","Object","keys","baseRest","func","start","objectProto","prototype","hasOwnProperty","assign","object","source","key","call","assignValue","objValue","undefined","baseAssignValue","nativeObjectToString","toString","objectToString","forEach","collection","iteratee","parseName","name","defaultPrefix","parts","split","localName","prefix","Error","coerceType","isBuiltIn","isSimple","BUILTINS","String","Boolean","Integer","Real","Element","TYPE_CONVERTERS","s","parseInt","parseFloat","type","converter","aliasToName","nameToAlias","serializeAsType","serializeAsProperty","XSI_TYPE","XSI_URI","DEFAULT_NS_MAP","capitalize","string","charAt","toUpperCase","slice","lower","toLowerCase","hasLowerCaseAlias","pkg","xml","tagAlias","serializeFormat","element","serialize","alias","Reader","Writer","parseNodeAttributes","node","nodeAttrs","attributes","result","v","k","ns","local","normalizeType","attr","model","nameNs","uri","getPackage","typePrefix","indexOf","normalizeNamespaces","defaultNsUri","error","message","getModdleDescriptor","$descriptor","Context","options","elementsById","references","warnings","reference","push","descriptor","idProperty","id","get","warning","BaseHandler","text","NoopHandler","BodyHandler","body","ReferenceHandler","property","context","createReference","ValueHandler","propertyDesc","isMany","set","BaseElementHandler","createElement","addElement","handleChild","ElementHandler","typeStr","getType","addReference","bodyProperty","Type","instance","prop","propertiesByName","values","isReference","propertyName","elementTypeName","elementType","typeAnnotation","effectiveType","$pkg","properties","p","isVirtual","isAttribute","hasType","GenericElementHandler","childHandler","getPropertyForNode","valueHandler","referenceHandler","handleNode","handler","newElement","$parent","createAny","children","$children","$body","XMLReader","lax","done","rootHandler","parser","xmlns","trim","stack","resolveReferences","i","r","addWarning","idx","splice","handleClose","tagName","pop","handleEnd","handleOpen","peek","e","line","column","console","warn","handleText","onopentag","oncdata","ontext","onclosetag","onend","write","close","defer","args","FUNC_ERROR_TEXT","baseDelay","wait","TypeError","setTimeout","apply","nativeMax","Math","max","overRest","transform","arguments","index","array","otherArgs","thisArg","defineProperty","getValue","eq","other","copyObject","props","customizer","isNew","newValue","createAssigner","assigner","sources","guard","stubFalse","asyncTag","funcTag","genTag","proxyTag","isFunction","tag","isObject","MAX_SAFE_INTEGER","isLength","overArg","arg","find","createFind","findIndexFunc","predicate","fromIndex","iterable","findIndex","baseFindIndex","fromRight","arrayEach","baseForOwn","baseFor","createBaseFor","keysFunc","createBaseEach","eachFunc","reduce","accumulator","initAccum","arrayReduce","baseReduce","global","TinyStack","data","top","clear","factory","module","exports","define","sax","strict","opt","SAXParser","SAXStream","createStream","MAX_BUFFER_LENGTH","buffers","EVENTS","clearBuffers","q","c","bufferCheckPosition","lowercase","lowercasetags","looseCase","tags","closed","closedRoot","sawRoot","noscript","state","S","BEGIN","ENTITIES","create","attribList","rootNS","trackPosition","position","emit","o","f","__proto__","getPrototypeOf","a","checkBufferLength","maxAllowed","maxActual","l","len","closeText","emitNode","cdata","script","flushBuffers","end","resume","flush","Stream","require","ex","streamWraps","filter","ev","_parser","writable","readable","me","onerror","er","_decoder","h","removeAllListeners","on","enumerable","configurable","constructor","Buffer","isBuffer","SD","StringDecoder","chunk","whitespace","number","letter","quote","entity","attribEnd","CDATA","DOCTYPE","XML_NAMESPACE","XMLNS_NAMESPACE","charClass","nameStart","nameBody","str","isRegExp","is","charclass","match","not","STATE","TEXT","TEXT_ENTITY","OPEN_WAKA","SGML_DECL","SGML_DECL_QUOTED","DOCTYPE_QUOTED","DOCTYPE_DTD","DOCTYPE_DTD_QUOTED","COMMENT_STARTING","COMMENT","COMMENT_ENDING","COMMENT_ENDED","CDATA_ENDING","CDATA_ENDING_2","PROC_INST","PROC_INST_BODY","PROC_INST_ENDING","OPEN_TAG","OPEN_TAG_SLASH","ATTRIB","ATTRIB_NAME","ATTRIB_NAME_SAW_WHITE","ATTRIB_VALUE","ATTRIB_VALUE_QUOTED","ATTRIB_VALUE_CLOSED","ATTRIB_VALUE_UNQUOTED","ATTRIB_VALUE_ENTITY_Q","ATTRIB_VALUE_ENTITY_U","CLOSE_TAG","CLOSE_TAG_SAW_WHITE","SCRIPT","SCRIPT_ENDING","fromCharCode","event","nodeType","textNode","textopts","normalize","replace","strictFail","newTag","parent","qname","attribute","qualName","attrib","attribName","attribValue","qn","openTag","selfClosing","JSON","stringify","nv","isSelfClosing","closeTag","t","closeTo","x","n","parseEntity","entityLC","num","numStr","fromCodePoint","startTagPosition","starti","substring","sgmlDecl","procInstName","procInstBody","pad","join","comment","doctype","returnState","buffer","stringFromCharCode","floor","MAX_SIZE","codeUnits","highSurrogate","lowSurrogate","codePoint","Number","isFinite","RangeError","XML_PREAMBLE","ESCAPE_CHARS","nsName","getNsAttrs","namespaces","isUsed","used","toAttr","allNs","concat","wellknown","custom","getElementNs","isGeneric","getPropertyNs","getSerializableProperties","default","ESCAPE_MAP","escapeAttr","filterAttributes","isAttr","filterContained","ReferenceSerializer","writer","appendIndent","append","appendNewLine","BodySerializer","serializeValue","escape","search","ValueSerializer","ElementSerializer","attrs","otherAttrs","parseNsAttributes","nsTagName","parseGeneric","parseAttributes","parseContainments","parseGenericAttributes","effectiveNs","logNamespaceUsed","inherited","isLocalNs","self","val","build","child","genericAttrs","$attrs","$model","logNamespace","addAttribute","nsAttributeName","nsPropertyTagName","isBody","asType","asProperty","serializer","TypeSerializer","getNamespaces","prefixMap","uriMap","nsUri","existing","wellknownUri","root","firstBody","indent","serializeAttributes","b","serializeTo","unindent","typeNs","SavingWriter","FormatingWriter","out","format","XMLWriter","preamble","tree","internalWriter","formatingWriter","arrayFilter","resIndex","baseFilter","stringTag","isString","isObjectLike","map","arrayMap","baseMap"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory((function webpackLoadOptionalExternalModule() { try { return require(\"stream\"); } catch(e) {} }()), require(\"string_decoder\"), require(\"moddle\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"stream\", \"string_decoder\", \"moddle\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ModdleXML\"] = factory((function webpackLoadOptionalExternalModule() { try { return require(\"stream\"); } catch(e) {} }()), require(\"string_decoder\"), require(\"moddle\"));\n\telse\n\t\troot[\"ModdleXML\"] = factory(root[\"stream\"], root[\"string_decoder\"], root[\"Moddle\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_49__, __WEBPACK_EXTERNAL_MODULE_50__, __WEBPACK_EXTERNAL_MODULE_51__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 73bb7261a3613c35fb7b","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/identity.js","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/isArray.js","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/isArrayLike.js","import baseForOwn from './_baseForOwn.js';\nimport createBaseEach from './_createBaseEach.js';\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nexport default baseEach;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_baseEach.js","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_nativeKeys.js","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_baseRest.js","import assignValue from './_assignValue.js';\nimport copyObject from './_copyObject.js';\nimport createAssigner from './_createAssigner.js';\nimport isArrayLike from './isArrayLike.js';\nimport isPrototype from './_isPrototype.js';\nimport keys from './keys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\nexport default assign;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/assign.js","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_assignValue.js","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_baseAssignValue.js","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_objectToString.js","import arrayEach from './_arrayEach.js';\nimport baseEach from './_baseEach.js';\nimport castFunction from './_castFunction.js';\nimport isArray from './isArray.js';\n\n/**\n * Iterates over elements of `collection` and invokes `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n * property are iterated like arrays. To avoid this behavior use `_.forIn`\n * or `_.forOwn` for object iteration.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEachRight\n * @example\n *\n * _.forEach([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `1` then `2`.\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forEach(collection, iteratee) {\n  var func = isArray(collection) ? arrayEach : baseEach;\n  return func(collection, castFunction(iteratee));\n}\n\nexport default forEach;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/forEach.js","/**\n * Parses a namespaced attribute name of the form (ns:)localName to an object,\n * given a default prefix to assume in case no explicit namespace is given.\n *\n * @param {String} name\n * @param {String} [defaultPrefix] the default prefix to take, if none is present.\n *\n * @return {Object} the parsed name\n */\nexport function parseName(name, defaultPrefix) {\n  var parts = name.split(/:/),\n      localName, prefix;\n\n  // no prefix (i.e. only local name)\n  if (parts.length === 1) {\n    localName = name;\n    prefix = defaultPrefix;\n  } else\n  // prefix + local name\n  if (parts.length === 2) {\n    localName = parts[1];\n    prefix = parts[0];\n  } else {\n    throw new Error('expected <prefix:localName> or <localName>, got ' + name);\n  }\n\n  name = (prefix ? prefix + ':' : '') + localName;\n\n  return {\n    name: name,\n    prefix: prefix,\n    localName: localName\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/moddle/lib/ns.js","/**\n * Built-in moddle types\n */\nvar BUILTINS = {\n  String: true,\n  Boolean: true,\n  Integer: true,\n  Real: true,\n  Element: true\n};\n\n/**\n * Converters for built in types from string representations\n */\nvar TYPE_CONVERTERS = {\n  String: function(s) { return s; },\n  Boolean: function(s) { return s === 'true'; },\n  Integer: function(s) { return parseInt(s, 10); },\n  Real: function(s) { return parseFloat(s, 10); }\n};\n\n/**\n * Convert a type to its real representation\n */\nexport function coerceType(type, value) {\n\n  var converter = TYPE_CONVERTERS[type];\n\n  if (converter) {\n    return converter(value);\n  } else {\n    return value;\n  }\n}\n\n/**\n * Return whether the given type is built-in\n */\nexport function isBuiltIn(type) {\n  return !!BUILTINS[type];\n}\n\n/**\n * Return whether the given type is simple\n */\nexport function isSimple(type) {\n  return !!TYPE_CONVERTERS[type];\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/moddle/lib/types.js","export const XSI_TYPE = 'xsi:type';\nexport const XSI_URI = 'http://www.w3.org/2001/XMLSchema-instance';\n\nexport const DEFAULT_NS_MAP = {\n  'xsi': XSI_URI\n};\n\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction lower(string) {\n  return string.charAt(0).toLowerCase() + string.slice(1);\n}\n\nfunction hasLowerCaseAlias(pkg) {\n  return pkg.xml && pkg.xml.tagAlias === 'lowerCase';\n}\n\nfunction serializeFormat(element) {\n  return element.xml && element.xml.serialize;\n}\n\n\nexport function aliasToName(alias, pkg) {\n  if (hasLowerCaseAlias(pkg)) {\n    return capitalize(alias);\n  } else {\n    return alias;\n  }\n}\n\nexport function nameToAlias(name, pkg) {\n  if (hasLowerCaseAlias(pkg)) {\n    return lower(name);\n  } else {\n    return name;\n  }\n}\n\nexport function serializeAsType(element) {\n  return serializeFormat(element) === XSI_TYPE;\n}\n\nexport function serializeAsProperty(element) {\n  return serializeFormat(element) === 'property';\n}\n\n\n// WEBPACK FOOTER //\n// ./lib/common.js","import Reader from './reader';\nimport Writer from './writer';\n\nexport {\n  Reader,\n  Writer\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js","import {\n  reduce,\n  forEach,\n  find,\n  assign,\n  defer\n} from 'lodash-es';\n\nimport Stack from 'tiny-stack';\nimport { parser as SaxParser } from 'sax';\nimport Moddle from 'moddle';\n\nimport {\n  parseName as parseNameNs\n} from 'moddle/lib/ns';\n\nimport {\n  coerceType,\n  isSimple as isSimpleType\n} from 'moddle/lib/types';\n\nimport {\n  XSI_TYPE,\n  XSI_URI,\n  serializeAsType,\n  aliasToName\n} from './common';\n\n\nfunction parseNodeAttributes(node) {\n  var nodeAttrs = node.attributes;\n\n  return reduce(nodeAttrs, function(result, v, k) {\n    var name, ns;\n\n    if (!v.local) {\n      name = v.prefix;\n    } else {\n      ns = parseNameNs(v.name, v.prefix);\n      name = ns.name;\n    }\n\n    result[name] = v.value;\n    return result;\n  }, {});\n}\n\nfunction normalizeType(node, attr, model) {\n  var nameNs = parseNameNs(attr.value);\n\n  var uri = node.ns[nameNs.prefix || ''],\n      localName = nameNs.localName,\n      pkg = uri && model.getPackage(uri),\n      typePrefix;\n\n  if (pkg) {\n    typePrefix = pkg.xml && pkg.xml.typePrefix;\n\n    if (typePrefix && localName.indexOf(typePrefix) === 0) {\n      localName = localName.slice(typePrefix.length);\n    }\n\n    attr.value = pkg.prefix + ':' + localName;\n  }\n}\n\n/**\n * Normalizes namespaces for a node given an optional default namespace and a\n * number of mappings from uris to default prefixes.\n *\n * @param  {XmlNode} node\n * @param  {Model} model the model containing all registered namespaces\n * @param  {Uri} defaultNsUri\n */\nfunction normalizeNamespaces(node, model, defaultNsUri) {\n  var uri, prefix;\n\n  uri = node.uri || defaultNsUri;\n\n  if (uri) {\n    var pkg = model.getPackage(uri);\n\n    if (pkg) {\n      prefix = pkg.prefix;\n    } else {\n      prefix = node.prefix;\n    }\n\n    node.prefix = prefix;\n    node.uri = uri;\n  }\n\n  forEach(node.attributes, function(attr) {\n\n    // normalize xsi:type attributes because the\n    // assigned type may or may not be namespace prefixed\n    if (attr.uri === XSI_URI && attr.local === 'type') {\n      normalizeType(node, attr, model);\n    }\n\n    normalizeNamespaces(attr, model, null);\n  });\n}\n\n\nfunction error(message) {\n  return new Error(message);\n}\n\n/**\n * Get the moddle descriptor for a given instance or type.\n *\n * @param  {ModdleElement|Function} element\n *\n * @return {Object} the moddle descriptor\n */\nfunction getModdleDescriptor(element) {\n  return element.$descriptor;\n}\n\n/**\n * A parse context.\n *\n * @class\n */\nclass Context {\n\n  /**\n   * @property {ElementHandler} rootHandler\n   */\n\n  /**\n   * @property {Boolean} lax\n   */\n\n  /**\n   * Creates a new Context.\n   *\n   * @param {Object} options\n   * @param {ElementHandler} options.rootHandler the root handler for parsing a document\n   * @param {boolean} [options.lax=false] whether or not to ignore invalid elements\n   */\n  constructor(options) {\n    assign(this, options);\n\n    this.elementsById = {};\n    this.references = [];\n    this.warnings = [];\n  }\n\n  /**\n   * Add an unresolved reference.\n   *\n   * @param {Object} reference\n   */\n  addReference(reference) {\n    this.references.push(reference);\n  }\n\n  /**\n   * Add a processed element.\n   *\n   * @param {ModdleElement} element\n   */\n  addElement(element) {\n\n    if (!element) {\n      throw error('expected element');\n    }\n\n    var elementsById = this.elementsById;\n\n    var descriptor = getModdleDescriptor(element);\n\n    var idProperty = descriptor.idProperty,\n        id;\n\n    if (idProperty) {\n      id = element.get(idProperty.name);\n\n      if (id) {\n\n        if (elementsById[id]) {\n          throw error('duplicate ID <' + id + '>');\n        }\n\n        elementsById[id] = element;\n      }\n    }\n  }\n\n  /**\n   * Add an import warning.\n   *\n   * @param {Object} warning\n   * @param {String} warning.message\n   * @param {Error} [warning.error]\n   */\n  addWarning(warning) {\n    this.warnings.push(warning);\n  }\n\n}\n\n/**\n * Base handler implementation.\n */\nclass BaseHandler {\n\n  /**\n   * Wrap up handling of context.\n   */\n  handleEnd() { }\n\n  /**\n   * Handle given text.\n   *\n   * @param {String} text\n   */\n  handleText(text) { }\n\n  /**\n   * Handle node and return handler to delegate for this node.\n   *\n   * @param {Node} node\n   *\n   * @return {BaseHandler} delegating handler\n   */\n  handleNode(node) { }\n\n}\n\n/**\n * A simple pass through handler that does nothing except for\n * ignoring all input it receives.\n *\n * This is used to ignore unknown elements and\n * attributes.\n */\nclass NoopHandler extends BaseHandler {\n  handleNode(node) {\n    return this;\n  }\n}\n\n\n/**\n * A handler that handles body text.\n */\nclass BodyHandler extends BaseHandler {\n\n  handleText(text) {\n    this.body = (this.body || '') + text;\n  }\n\n}\n\n/**\n * A handler that handles element references.\n */\nclass ReferenceHandler extends BodyHandler {\n\n  constructor(property, context) {\n    super();\n\n    this.property = property;\n    this.context = context;\n  }\n\n\n  handleNode(node) {\n\n    if (this.element) {\n      throw error('expected no sub nodes');\n    } else {\n      this.element = this.createReference(node);\n    }\n\n    return this;\n  }\n\n  handleEnd() {\n    this.element.id = this.body;\n  }\n\n  createReference(node) {\n    return {\n      property: this.property.ns.name,\n      id: ''\n    };\n  }\n\n}\n\n\n/**\n * Handles nested simple values.\n */\nclass ValueHandler extends BodyHandler {\n\n  constructor(propertyDesc, element) {\n    super();\n\n    this.element = element;\n    this.propertyDesc = propertyDesc;\n  }\n\n  handleEnd() {\n    var value = this.body || '',\n        element = this.element,\n        propertyDesc = this.propertyDesc;\n\n    value = coerceType(propertyDesc.type, value);\n\n    if (propertyDesc.isMany) {\n      element.get(propertyDesc.name).push(value);\n    } else {\n      element.set(propertyDesc.name, value);\n    }\n  }\n\n}\n\n\n/**\n * A handler for a nested child element.\n */\nclass BaseElementHandler extends BodyHandler {\n\n  constructor(model, context) {\n    super();\n\n    this.model = model;\n    this.context = context;\n  }\n\n  handleNode(node) {\n    var element = this.element;\n\n    if (!element) {\n      element = this.element = this.createElement(node);\n\n      this.context.addElement(element);\n\n      return this;\n    } else {\n      return this.handleChild(node);\n    }\n  }\n\n}\n\n\n/**\n * The main handler, handling an element.\n */\nclass ElementHandler extends BaseElementHandler {\n\n  constructor(model, typeStr, context) {\n    super(model, context);\n\n    this.type = model.getType(typeStr);\n  }\n\n  addReference(reference) {\n    this.context.addReference(reference);\n  }\n\n  handleEnd() {\n\n    var value = this.body,\n        element = this.element,\n        descriptor = getModdleDescriptor(element),\n        bodyProperty = descriptor.bodyProperty;\n\n    if (bodyProperty && value !== undefined) {\n      value = coerceType(bodyProperty.type, value);\n      element.set(bodyProperty.name, value);\n    }\n  }\n\n  /**\n   * Create an instance of the model from the given node.\n   *\n   * @param  {Element} node the xml node\n   */\n  createElement(node) {\n    var attributes = parseNodeAttributes(node),\n        Type = this.type,\n        descriptor = getModdleDescriptor(Type),\n        context = this.context,\n        instance = new Type({});\n\n    forEach(attributes, function(value, name) {\n\n      var prop = descriptor.propertiesByName[name],\n          values;\n\n      if (prop && prop.isReference) {\n\n        if (!prop.isMany) {\n          context.addReference({\n            element: instance,\n            property: prop.ns.name,\n            id: value\n          });\n        } else {\n          // IDREFS: parse references as whitespace-separated list\n          values = value.split(' ');\n\n          forEach(values, function(v) {\n            context.addReference({\n              element: instance,\n              property: prop.ns.name,\n              id: v\n            });\n          });\n        }\n\n      } else {\n        if (prop) {\n          value = coerceType(prop.type, value);\n        }\n\n        instance.set(name, value);\n      }\n    });\n\n    return instance;\n  }\n\n  getPropertyForNode(node) {\n\n    var nameNs = parseNameNs(node.local, node.prefix);\n\n    var type = this.type,\n        model = this.model,\n        descriptor = getModdleDescriptor(type);\n\n    var propertyName = nameNs.name,\n        property = descriptor.propertiesByName[propertyName],\n        elementTypeName,\n        elementType,\n        typeAnnotation;\n\n    // search for properties by name first\n\n    if (property) {\n\n      if (serializeAsType(property)) {\n        typeAnnotation = node.attributes[XSI_TYPE];\n\n        // xsi type is optional, if it does not exists the\n        // default type is assumed\n        if (typeAnnotation) {\n\n          elementTypeName = typeAnnotation.value;\n\n          // TODO: extract real name from attribute\n          elementType = model.getType(elementTypeName);\n\n          return assign({}, property, { effectiveType: getModdleDescriptor(elementType).name });\n        }\n      }\n\n      // search for properties by name first\n      return property;\n    }\n\n\n    var pkg = model.getPackage(nameNs.prefix);\n\n    if (pkg) {\n      elementTypeName = nameNs.prefix + ':' + aliasToName(nameNs.localName, descriptor.$pkg);\n      elementType = model.getType(elementTypeName);\n\n      // search for collection members later\n      property = find(descriptor.properties, function(p) {\n        return !p.isVirtual && !p.isReference && !p.isAttribute && elementType.hasType(p.type);\n      });\n\n      if (property) {\n        return assign({}, property, { effectiveType: getModdleDescriptor(elementType).name });\n      }\n    } else {\n      // parse unknown element (maybe extension)\n      property = find(descriptor.properties, function(p) {\n        return !p.isReference && !p.isAttribute && p.type === 'Element';\n      });\n\n      if (property) {\n        return property;\n      }\n    }\n\n    throw error('unrecognized element <' + nameNs.name + '>');\n  }\n\n  toString() {\n    return 'ElementDescriptor[' + getModdleDescriptor(this.type).name + ']';\n  }\n\n  valueHandler(propertyDesc, element) {\n    return new ValueHandler(propertyDesc, element);\n  }\n\n  referenceHandler(propertyDesc) {\n    return new ReferenceHandler(propertyDesc, this.context);\n  }\n\n  handler(type) {\n    if (type === 'Element') {\n      return new GenericElementHandler(this.model, type, this.context);\n    } else {\n      return new ElementHandler(this.model, type, this.context);\n    }\n  }\n\n  /**\n   * Handle the child element parsing\n   *\n   * @param  {Element} node the xml node\n   */\n  handleChild(node) {\n    var propertyDesc, type, element, childHandler;\n\n    propertyDesc = this.getPropertyForNode(node);\n    element = this.element;\n\n    type = propertyDesc.effectiveType || propertyDesc.type;\n\n    if (isSimpleType(type)) {\n      return this.valueHandler(propertyDesc, element);\n    }\n\n    if (propertyDesc.isReference) {\n      childHandler = this.referenceHandler(propertyDesc).handleNode(node);\n    } else {\n      childHandler = this.handler(type).handleNode(node);\n    }\n\n    var newElement = childHandler.element;\n\n    // child handles may decide to skip elements\n    // by not returning anything\n    if (newElement !== undefined) {\n\n      if (propertyDesc.isMany) {\n        element.get(propertyDesc.name).push(newElement);\n      } else {\n        element.set(propertyDesc.name, newElement);\n      }\n\n      if (propertyDesc.isReference) {\n        assign(newElement, {\n          element: element\n        });\n\n        this.context.addReference(newElement);\n      } else {\n        // establish child -> parent relationship\n        newElement.$parent = element;\n      }\n    }\n\n    return childHandler;\n  }\n\n}\n\n\n/**\n * A handler for unknown elements.\n */\nclass GenericElementHandler extends BaseElementHandler {\n\n  constructor(model, typeStr, context) {\n    super(model, context);\n  }\n\n  createElement(node) {\n\n    var name = node.name,\n        prefix = node.prefix,\n        uri = node.ns[prefix],\n        attributes = node.attributes;\n\n    return this.model.createAny(name, uri, attributes);\n  }\n\n  handleChild(node) {\n\n    var handler = new GenericElementHandler(this.model, 'Element', this.context).handleNode(node),\n        element = this.element;\n\n    var newElement = handler.element,\n        children;\n\n    if (newElement !== undefined) {\n      children = element.$children = element.$children || [];\n      children.push(newElement);\n\n      // establish child -> parent relationship\n      newElement.$parent = element;\n    }\n\n    return handler;\n  }\n\n  handleText(text) {\n    this.body = (this.body || '') + text;\n  }\n\n  handleEnd() {\n    if (this.body) {\n      this.element.$body = this.body;\n    }\n  }\n\n}\n\n\n/**\n * A reader for a meta-model.\n */\nexport default class XMLReader {\n\n  /**\n   * Construct the reader instance.\n   *\n   * @param {Object} options\n   * @param {Model} options.model used to read xml files\n   * @param {Boolean} options.lax whether to make parse errors warnings\n   */\n  constructor(options) {\n\n    if (options instanceof Moddle) {\n      options = {\n        model: options\n      };\n    }\n\n    assign(this, { lax: false }, options);\n  }\n\n\n  /**\n   * Parse the given XML into a moddle document tree.\n   *\n   * @param {String} xml\n   * @param {ElementHandler|Object} options or rootHandler\n   * @param  {Function} done\n   */\n  fromXML(xml, options, done) {\n\n    var rootHandler = options.rootHandler;\n\n    if (options instanceof ElementHandler) {\n      // root handler passed via (xml, { rootHandler: ElementHandler }, ...)\n      rootHandler = options;\n      options = {};\n    } else {\n      if (typeof options === 'string') {\n        // rootHandler passed via (xml, 'someString', ...)\n        rootHandler = this.handler(options);\n        options = {};\n      } else if (typeof rootHandler === 'string') {\n        // rootHandler passed via (xml, { rootHandler: 'someString' }, ...)\n        rootHandler = this.handler(rootHandler);\n      }\n    }\n\n    var model = this.model,\n        lax = this.lax;\n\n    var context = new Context(assign({}, options, { rootHandler: rootHandler })),\n        parser = new SaxParser(true, { xmlns: true, trim: true }),\n        stack = new Stack();\n\n    rootHandler.context = context;\n\n    // push root handler\n    stack.push(rootHandler);\n\n\n    function resolveReferences() {\n\n      var elementsById = context.elementsById;\n      var references = context.references;\n\n      var i, r;\n\n      for (i = 0; (r = references[i]); i++) {\n        var element = r.element;\n        var reference = elementsById[r.id];\n        var property = getModdleDescriptor(element).propertiesByName[r.property];\n\n        if (!reference) {\n          context.addWarning({\n            message: 'unresolved reference <' + r.id + '>',\n            element: r.element,\n            property: r.property,\n            value: r.id\n          });\n        }\n\n        if (property.isMany) {\n          var collection = element.get(property.name),\n              idx = collection.indexOf(r);\n\n          // we replace an existing place holder (idx != -1) or\n          // append to the collection instead\n          if (idx === -1) {\n            idx = collection.length;\n          }\n\n          if (!reference) {\n            // remove unresolvable reference\n            collection.splice(idx, 1);\n          } else {\n            // add or update reference in collection\n            collection[idx] = reference;\n          }\n        } else {\n          element.set(property.name, reference);\n        }\n      }\n    }\n\n    function handleClose(tagName) {\n      stack.pop().handleEnd();\n    }\n\n    function handleOpen(node) {\n      var handler = stack.peek();\n\n      normalizeNamespaces(node, model);\n\n      try {\n        stack.push(handler.handleNode(node));\n      } catch (e) {\n\n        var line = this.line,\n            column = this.column;\n\n        var message =\n          'unparsable content <' + node.name + '> detected\\n\\t' +\n            'line: ' + line + '\\n\\t' +\n            'column: ' + column + '\\n\\t' +\n            'nested error: ' + e.message;\n\n        if (lax) {\n          context.addWarning({\n            message: message,\n            error: e\n          });\n\n          console.warn('could not parse node');\n          console.warn(e);\n\n          stack.push(new NoopHandler());\n        } else {\n          console.error('could not parse document');\n          console.error(e);\n\n          throw error(message);\n        }\n      }\n    }\n\n    function handleText(text) {\n      stack.peek().handleText(text);\n    }\n\n    parser.onopentag = handleOpen;\n    parser.oncdata = parser.ontext = handleText;\n    parser.onclosetag = handleClose;\n    parser.onend = resolveReferences;\n\n    // deferred parse XML to make loading really ascnchronous\n    // this ensures the execution environment (node or browser)\n    // is kept responsive and that certain optimization strategies\n    // can kick in\n    defer(function() {\n      var error;\n\n      try {\n        parser.write(xml).close();\n      } catch (e) {\n        error = e;\n      }\n\n      done(error, error ? undefined : rootHandler.element, context);\n    });\n  }\n\n\n  /**\n   * Return a handler with the given name.\n   *\n   * @param {String} name\n   *\n   * @return {BaseHandler}\n   */\n  handler(name) {\n    return new ElementHandler(this.model, name);\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./lib/reader.js","import baseDelay from './_baseDelay.js';\nimport baseRest from './_baseRest.js';\n\n/**\n * Defers invoking the `func` until the current call stack has cleared. Any\n * additional arguments are provided to `func` when it's invoked.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to defer.\n * @param {...*} [args] The arguments to invoke `func` with.\n * @returns {number} Returns the timer id.\n * @example\n *\n * _.defer(function(text) {\n *   console.log(text);\n * }, 'deferred');\n * // => Logs 'deferred' after one millisecond.\n */\nvar defer = baseRest(function(func, args) {\n  return baseDelay(func, 1, args);\n});\n\nexport default defer;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/defer.js","/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * The base implementation of `_.delay` and `_.defer` which accepts `args`\n * to provide to `func`.\n *\n * @private\n * @param {Function} func The function to delay.\n * @param {number} wait The number of milliseconds to delay invocation.\n * @param {Array} args The arguments to provide to `func`.\n * @returns {number|Object} Returns the timer id or timeout object.\n */\nfunction baseDelay(func, wait, args) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  return setTimeout(function() { func.apply(undefined, args); }, wait);\n}\n\nexport default baseDelay;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_baseDelay.js","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_overRest.js","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_apply.js","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_defineProperty.js","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_getValue.js","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/eq.js","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_copyObject.js","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_createAssigner.js","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/stubFalse.js","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/isFunction.js","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/isObject.js","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/isLength.js","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_overArg.js","import createFind from './_createFind.js';\nimport findIndex from './findIndex.js';\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nvar find = createFind(findIndex);\n\nexport default find;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/find.js","import baseIteratee from './_baseIteratee.js';\nimport isArrayLike from './isArrayLike.js';\nimport keys from './keys.js';\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} findIndexFunc The function to find the collection index.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(findIndexFunc) {\n  return function(collection, predicate, fromIndex) {\n    var iterable = Object(collection);\n    if (!isArrayLike(collection)) {\n      var iteratee = baseIteratee(predicate, 3);\n      collection = keys(collection);\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n    }\n    var index = findIndexFunc(collection, predicate, fromIndex);\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n  };\n}\n\nexport default createFind;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_createFind.js","import baseFindIndex from './_baseFindIndex.js';\nimport baseIteratee from './_baseIteratee.js';\nimport toInteger from './toInteger.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @since 1.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index);\n}\n\nexport default findIndex;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/findIndex.js","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default baseFindIndex;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_baseFindIndex.js","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_arrayEach.js","import baseFor from './_baseFor.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nexport default baseForOwn;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_baseForOwn.js","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_baseFor.js","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_createBaseFor.js","import isArrayLike from './isArrayLike.js';\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nexport default createBaseEach;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_createBaseEach.js","import arrayReduce from './_arrayReduce.js';\nimport baseEach from './_baseEach.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseReduce from './_baseReduce.js';\nimport isArray from './isArray.js';\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` thru `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not given, the first element of `collection` is used as the initial\n * value. The iteratee is invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n * and `sortBy`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @see _.reduceRight\n * @example\n *\n * _.reduce([1, 2], function(sum, n) {\n *   return sum + n;\n * }, 0);\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n *   return result;\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n */\nfunction reduce(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduce : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n}\n\nexport default reduce;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/reduce.js","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nexport default arrayReduce;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_arrayReduce.js","/**\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initAccum Specify using the first or last element of\n *  `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initAccum\n      ? (initAccum = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nexport default baseReduce;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_baseReduce.js","/**\n * Tiny stack for browser or server\n *\n * @author Jason Mulligan <jason.mulligan@avoidwork.com>\n * @copyright 2014 Jason Mulligan\n * @license BSD-3 <https://raw.github.com/avoidwork/tiny-stack/master/LICENSE>\n * @link http://avoidwork.github.io/tiny-stack\n * @module tiny-stack\n * @version 0.1.0\n */\n\n( function ( global ) {\n\n\"use strict\";\n\n/**\n * TinyStack\n *\n * @constructor\n */\nfunction TinyStack () {\n\tthis.data = [null];\n\tthis.top  = 0;\n}\n\n/**\n * Clears the stack\n *\n * @method clear\n * @memberOf TinyStack\n * @return {Object} {@link TinyStack}\n */\nTinyStack.prototype.clear = function clear () {\n\tthis.data = [null];\n\tthis.top  = 0;\n\n\treturn this;\n};\n\n/**\n * Gets the size of the stack\n *\n * @method length\n * @memberOf TinyStack\n * @return {Number} Size of stack\n */\nTinyStack.prototype.length = function length () {\n\treturn this.top;\n};\n\n/**\n * Gets the item at the top of the stack\n *\n * @method peek\n * @memberOf TinyStack\n * @return {Mixed} Item at the top of the stack\n */\nTinyStack.prototype.peek = function peek () {\n\treturn this.data[this.top];\n};\n\n/**\n * Gets & removes the item at the top of the stack\n *\n * @method pop\n * @memberOf TinyStack\n * @return {Mixed} Item at the top of the stack\n */\nTinyStack.prototype.pop = function pop () {\n\tif ( this.top > 0 ) {\n\t\tthis.top--;\n\n\t\treturn this.data.pop();\n\t}\n\telse {\n\t\treturn undefined;\n\t}\n};\n\n/**\n * Pushes an item onto the stack\n *\n * @method push\n * @memberOf TinyStack\n * @return {Object} {@link TinyStack}\n */\nTinyStack.prototype.push = function push ( arg ) {\n\tthis.data[++this.top] = arg;\n\n\treturn this;\n};\n\n/**\n * TinyStack factory\n *\n * @method factory\n * @return {Object} {@link TinyStack}\n */\nfunction factory () {\n\treturn new TinyStack();\n}\n\n// Node, AMD & window supported\nif ( typeof exports != \"undefined\" ) {\n\tmodule.exports = factory;\n}\nelse if ( typeof define == \"function\" ) {\n\tdefine( function () {\n\t\treturn factory;\n\t} );\n}\nelse {\n\tglobal.stack = factory;\n}\n} )( this );\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tiny-stack/lib/tiny-stack.js","// wrapper for non-node envs\n;(function (sax) {\n\nsax.parser = function (strict, opt) { return new SAXParser(strict, opt) }\nsax.SAXParser = SAXParser\nsax.SAXStream = SAXStream\nsax.createStream = createStream\n\n// When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n// When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n// since that's the earliest that a buffer overrun could occur.  This way, checks are\n// as rare as required, but as often as necessary to ensure never crossing this bound.\n// Furthermore, buffers are only tested at most once per write(), so passing a very\n// large string into write() might have undesirable effects, but this is manageable by\n// the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n// edge case, result in creating at most one complete copy of the string passed in.\n// Set to Infinity to have unlimited buffers.\nsax.MAX_BUFFER_LENGTH = 64 * 1024\n\nvar buffers = [\n  \"comment\", \"sgmlDecl\", \"textNode\", \"tagName\", \"doctype\",\n  \"procInstName\", \"procInstBody\", \"entity\", \"attribName\",\n  \"attribValue\", \"cdata\", \"script\"\n]\n\nsax.EVENTS = // for discoverability.\n  [ \"text\"\n  , \"processinginstruction\"\n  , \"sgmldeclaration\"\n  , \"doctype\"\n  , \"comment\"\n  , \"attribute\"\n  , \"opentag\"\n  , \"closetag\"\n  , \"opencdata\"\n  , \"cdata\"\n  , \"closecdata\"\n  , \"error\"\n  , \"end\"\n  , \"ready\"\n  , \"script\"\n  , \"opennamespace\"\n  , \"closenamespace\"\n  ]\n\nfunction SAXParser (strict, opt) {\n  if (!(this instanceof SAXParser)) return new SAXParser(strict, opt)\n\n  var parser = this\n  clearBuffers(parser)\n  parser.q = parser.c = \"\"\n  parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH\n  parser.opt = opt || {}\n  parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags\n  parser.looseCase = parser.opt.lowercase ? \"toLowerCase\" : \"toUpperCase\"\n  parser.tags = []\n  parser.closed = parser.closedRoot = parser.sawRoot = false\n  parser.tag = parser.error = null\n  parser.strict = !!strict\n  parser.noscript = !!(strict || parser.opt.noscript)\n  parser.state = S.BEGIN\n  parser.ENTITIES = Object.create(sax.ENTITIES)\n  parser.attribList = []\n\n  // namespaces form a prototype chain.\n  // it always points at the current tag,\n  // which protos to its parent tag.\n  if (parser.opt.xmlns) parser.ns = Object.create(rootNS)\n\n  // mostly just for error reporting\n  parser.trackPosition = parser.opt.position !== false\n  if (parser.trackPosition) {\n    parser.position = parser.line = parser.column = 0\n  }\n  emit(parser, \"onready\")\n}\n\nif (!Object.create) Object.create = function (o) {\n  function f () { this.__proto__ = o }\n  f.prototype = o\n  return new f\n}\n\nif (!Object.getPrototypeOf) Object.getPrototypeOf = function (o) {\n  return o.__proto__\n}\n\nif (!Object.keys) Object.keys = function (o) {\n  var a = []\n  for (var i in o) if (o.hasOwnProperty(i)) a.push(i)\n  return a\n}\n\nfunction checkBufferLength (parser) {\n  var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)\n    , maxActual = 0\n  for (var i = 0, l = buffers.length; i < l; i ++) {\n    var len = parser[buffers[i]].length\n    if (len > maxAllowed) {\n      // Text/cdata nodes can get big, and since they're buffered,\n      // we can get here under normal conditions.\n      // Avoid issues by emitting the text node now,\n      // so at least it won't get any bigger.\n      switch (buffers[i]) {\n        case \"textNode\":\n          closeText(parser)\n        break\n\n        case \"cdata\":\n          emitNode(parser, \"oncdata\", parser.cdata)\n          parser.cdata = \"\"\n        break\n\n        case \"script\":\n          emitNode(parser, \"onscript\", parser.script)\n          parser.script = \"\"\n        break\n\n        default:\n          error(parser, \"Max buffer length exceeded: \"+buffers[i])\n      }\n    }\n    maxActual = Math.max(maxActual, len)\n  }\n  // schedule the next check for the earliest possible buffer overrun.\n  parser.bufferCheckPosition = (sax.MAX_BUFFER_LENGTH - maxActual)\n                             + parser.position\n}\n\nfunction clearBuffers (parser) {\n  for (var i = 0, l = buffers.length; i < l; i ++) {\n    parser[buffers[i]] = \"\"\n  }\n}\n\nfunction flushBuffers (parser) {\n  closeText(parser)\n  if (parser.cdata !== \"\") {\n    emitNode(parser, \"oncdata\", parser.cdata)\n    parser.cdata = \"\"\n  }\n  if (parser.script !== \"\") {\n    emitNode(parser, \"onscript\", parser.script)\n    parser.script = \"\"\n  }\n}\n\nSAXParser.prototype =\n  { end: function () { end(this) }\n  , write: write\n  , resume: function () { this.error = null; return this }\n  , close: function () { return this.write(null) }\n  , flush: function () { flushBuffers(this) }\n  }\n\ntry {\n  var Stream = require(\"stream\").Stream\n} catch (ex) {\n  var Stream = function () {}\n}\n\n\nvar streamWraps = sax.EVENTS.filter(function (ev) {\n  return ev !== \"error\" && ev !== \"end\"\n})\n\nfunction createStream (strict, opt) {\n  return new SAXStream(strict, opt)\n}\n\nfunction SAXStream (strict, opt) {\n  if (!(this instanceof SAXStream)) return new SAXStream(strict, opt)\n\n  Stream.apply(this)\n\n  this._parser = new SAXParser(strict, opt)\n  this.writable = true\n  this.readable = true\n\n\n  var me = this\n\n  this._parser.onend = function () {\n    me.emit(\"end\")\n  }\n\n  this._parser.onerror = function (er) {\n    me.emit(\"error\", er)\n\n    // if didn't throw, then means error was handled.\n    // go ahead and clear error, so we can write again.\n    me._parser.error = null\n  }\n\n  this._decoder = null;\n\n  streamWraps.forEach(function (ev) {\n    Object.defineProperty(me, \"on\" + ev, {\n      get: function () { return me._parser[\"on\" + ev] },\n      set: function (h) {\n        if (!h) {\n          me.removeAllListeners(ev)\n          return me._parser[\"on\"+ev] = h\n        }\n        me.on(ev, h)\n      },\n      enumerable: true,\n      configurable: false\n    })\n  })\n}\n\nSAXStream.prototype = Object.create(Stream.prototype,\n  { constructor: { value: SAXStream } })\n\nSAXStream.prototype.write = function (data) {\n  if (typeof Buffer === 'function' &&\n      typeof Buffer.isBuffer === 'function' &&\n      Buffer.isBuffer(data)) {\n    if (!this._decoder) {\n      var SD = require('string_decoder').StringDecoder\n      this._decoder = new SD('utf8')\n    }\n    data = this._decoder.write(data);\n  }\n\n  this._parser.write(data.toString())\n  this.emit(\"data\", data)\n  return true\n}\n\nSAXStream.prototype.end = function (chunk) {\n  if (chunk && chunk.length) this.write(chunk)\n  this._parser.end()\n  return true\n}\n\nSAXStream.prototype.on = function (ev, handler) {\n  var me = this\n  if (!me._parser[\"on\"+ev] && streamWraps.indexOf(ev) !== -1) {\n    me._parser[\"on\"+ev] = function () {\n      var args = arguments.length === 1 ? [arguments[0]]\n               : Array.apply(null, arguments)\n      args.splice(0, 0, ev)\n      me.emit.apply(me, args)\n    }\n  }\n\n  return Stream.prototype.on.call(me, ev, handler)\n}\n\n\n\n// character classes and tokens\nvar whitespace = \"\\r\\n\\t \"\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n  , number = \"0124356789\"\n  , letter = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n  // (Letter | \"_\" | \":\")\n  , quote = \"'\\\"\"\n  , entity = number+letter+\"#\"\n  , attribEnd = whitespace + \">\"\n  , CDATA = \"[CDATA[\"\n  , DOCTYPE = \"DOCTYPE\"\n  , XML_NAMESPACE = \"http://www.w3.org/XML/1998/namespace\"\n  , XMLNS_NAMESPACE = \"http://www.w3.org/2000/xmlns/\"\n  , rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }\n\n// turn all the string character sets into character class objects.\nwhitespace = charClass(whitespace)\nnumber = charClass(number)\nletter = charClass(letter)\n\n// http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n// This implementation works on strings, a single character at a time\n// as such, it cannot ever support astral-plane characters (10000-EFFFF)\n// without a significant breaking change to either this  parser, or the\n// JavaScript language.  Implementation of an emoji-capable xml parser\n// is left as an exercise for the reader.\nvar nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n\nvar nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040\\.\\d-]/\n\nquote = charClass(quote)\nentity = charClass(entity)\nattribEnd = charClass(attribEnd)\n\nfunction charClass (str) {\n  return str.split(\"\").reduce(function (s, c) {\n    s[c] = true\n    return s\n  }, {})\n}\n\nfunction isRegExp (c) {\n  return Object.prototype.toString.call(c) === '[object RegExp]'\n}\n\nfunction is (charclass, c) {\n  return isRegExp(charclass) ? !!c.match(charclass) : charclass[c]\n}\n\nfunction not (charclass, c) {\n  return !is(charclass, c)\n}\n\nvar S = 0\nsax.STATE =\n{ BEGIN                     : S++\n, TEXT                      : S++ // general stuff\n, TEXT_ENTITY               : S++ // &amp and such.\n, OPEN_WAKA                 : S++ // <\n, SGML_DECL                 : S++ // <!BLARG\n, SGML_DECL_QUOTED          : S++ // <!BLARG foo \"bar\n, DOCTYPE                   : S++ // <!DOCTYPE\n, DOCTYPE_QUOTED            : S++ // <!DOCTYPE \"//blah\n, DOCTYPE_DTD               : S++ // <!DOCTYPE \"//blah\" [ ...\n, DOCTYPE_DTD_QUOTED        : S++ // <!DOCTYPE \"//blah\" [ \"foo\n, COMMENT_STARTING          : S++ // <!-\n, COMMENT                   : S++ // <!--\n, COMMENT_ENDING            : S++ // <!-- blah -\n, COMMENT_ENDED             : S++ // <!-- blah --\n, CDATA                     : S++ // <![CDATA[ something\n, CDATA_ENDING              : S++ // ]\n, CDATA_ENDING_2            : S++ // ]]\n, PROC_INST                 : S++ // <?hi\n, PROC_INST_BODY            : S++ // <?hi there\n, PROC_INST_ENDING          : S++ // <?hi \"there\" ?\n, OPEN_TAG                  : S++ // <strong\n, OPEN_TAG_SLASH            : S++ // <strong /\n, ATTRIB                    : S++ // <a\n, ATTRIB_NAME               : S++ // <a foo\n, ATTRIB_NAME_SAW_WHITE     : S++ // <a foo _\n, ATTRIB_VALUE              : S++ // <a foo=\n, ATTRIB_VALUE_QUOTED       : S++ // <a foo=\"bar\n, ATTRIB_VALUE_CLOSED       : S++ // <a foo=\"bar\"\n, ATTRIB_VALUE_UNQUOTED     : S++ // <a foo=bar\n, ATTRIB_VALUE_ENTITY_Q     : S++ // <foo bar=\"&quot;\"\n, ATTRIB_VALUE_ENTITY_U     : S++ // <foo bar=&quot;\n, CLOSE_TAG                 : S++ // </a\n, CLOSE_TAG_SAW_WHITE       : S++ // </a   >\n, SCRIPT                    : S++ // <script> ...\n, SCRIPT_ENDING             : S++ // <script> ... <\n}\n\nsax.ENTITIES =\n{ \"amp\" : \"&\"\n, \"gt\" : \">\"\n, \"lt\" : \"<\"\n, \"quot\" : \"\\\"\"\n, \"apos\" : \"'\"\n, \"AElig\" : 198\n, \"Aacute\" : 193\n, \"Acirc\" : 194\n, \"Agrave\" : 192\n, \"Aring\" : 197\n, \"Atilde\" : 195\n, \"Auml\" : 196\n, \"Ccedil\" : 199\n, \"ETH\" : 208\n, \"Eacute\" : 201\n, \"Ecirc\" : 202\n, \"Egrave\" : 200\n, \"Euml\" : 203\n, \"Iacute\" : 205\n, \"Icirc\" : 206\n, \"Igrave\" : 204\n, \"Iuml\" : 207\n, \"Ntilde\" : 209\n, \"Oacute\" : 211\n, \"Ocirc\" : 212\n, \"Ograve\" : 210\n, \"Oslash\" : 216\n, \"Otilde\" : 213\n, \"Ouml\" : 214\n, \"THORN\" : 222\n, \"Uacute\" : 218\n, \"Ucirc\" : 219\n, \"Ugrave\" : 217\n, \"Uuml\" : 220\n, \"Yacute\" : 221\n, \"aacute\" : 225\n, \"acirc\" : 226\n, \"aelig\" : 230\n, \"agrave\" : 224\n, \"aring\" : 229\n, \"atilde\" : 227\n, \"auml\" : 228\n, \"ccedil\" : 231\n, \"eacute\" : 233\n, \"ecirc\" : 234\n, \"egrave\" : 232\n, \"eth\" : 240\n, \"euml\" : 235\n, \"iacute\" : 237\n, \"icirc\" : 238\n, \"igrave\" : 236\n, \"iuml\" : 239\n, \"ntilde\" : 241\n, \"oacute\" : 243\n, \"ocirc\" : 244\n, \"ograve\" : 242\n, \"oslash\" : 248\n, \"otilde\" : 245\n, \"ouml\" : 246\n, \"szlig\" : 223\n, \"thorn\" : 254\n, \"uacute\" : 250\n, \"ucirc\" : 251\n, \"ugrave\" : 249\n, \"uuml\" : 252\n, \"yacute\" : 253\n, \"yuml\" : 255\n, \"copy\" : 169\n, \"reg\" : 174\n, \"nbsp\" : 160\n, \"iexcl\" : 161\n, \"cent\" : 162\n, \"pound\" : 163\n, \"curren\" : 164\n, \"yen\" : 165\n, \"brvbar\" : 166\n, \"sect\" : 167\n, \"uml\" : 168\n, \"ordf\" : 170\n, \"laquo\" : 171\n, \"not\" : 172\n, \"shy\" : 173\n, \"macr\" : 175\n, \"deg\" : 176\n, \"plusmn\" : 177\n, \"sup1\" : 185\n, \"sup2\" : 178\n, \"sup3\" : 179\n, \"acute\" : 180\n, \"micro\" : 181\n, \"para\" : 182\n, \"middot\" : 183\n, \"cedil\" : 184\n, \"ordm\" : 186\n, \"raquo\" : 187\n, \"frac14\" : 188\n, \"frac12\" : 189\n, \"frac34\" : 190\n, \"iquest\" : 191\n, \"times\" : 215\n, \"divide\" : 247\n, \"OElig\" : 338\n, \"oelig\" : 339\n, \"Scaron\" : 352\n, \"scaron\" : 353\n, \"Yuml\" : 376\n, \"fnof\" : 402\n, \"circ\" : 710\n, \"tilde\" : 732\n, \"Alpha\" : 913\n, \"Beta\" : 914\n, \"Gamma\" : 915\n, \"Delta\" : 916\n, \"Epsilon\" : 917\n, \"Zeta\" : 918\n, \"Eta\" : 919\n, \"Theta\" : 920\n, \"Iota\" : 921\n, \"Kappa\" : 922\n, \"Lambda\" : 923\n, \"Mu\" : 924\n, \"Nu\" : 925\n, \"Xi\" : 926\n, \"Omicron\" : 927\n, \"Pi\" : 928\n, \"Rho\" : 929\n, \"Sigma\" : 931\n, \"Tau\" : 932\n, \"Upsilon\" : 933\n, \"Phi\" : 934\n, \"Chi\" : 935\n, \"Psi\" : 936\n, \"Omega\" : 937\n, \"alpha\" : 945\n, \"beta\" : 946\n, \"gamma\" : 947\n, \"delta\" : 948\n, \"epsilon\" : 949\n, \"zeta\" : 950\n, \"eta\" : 951\n, \"theta\" : 952\n, \"iota\" : 953\n, \"kappa\" : 954\n, \"lambda\" : 955\n, \"mu\" : 956\n, \"nu\" : 957\n, \"xi\" : 958\n, \"omicron\" : 959\n, \"pi\" : 960\n, \"rho\" : 961\n, \"sigmaf\" : 962\n, \"sigma\" : 963\n, \"tau\" : 964\n, \"upsilon\" : 965\n, \"phi\" : 966\n, \"chi\" : 967\n, \"psi\" : 968\n, \"omega\" : 969\n, \"thetasym\" : 977\n, \"upsih\" : 978\n, \"piv\" : 982\n, \"ensp\" : 8194\n, \"emsp\" : 8195\n, \"thinsp\" : 8201\n, \"zwnj\" : 8204\n, \"zwj\" : 8205\n, \"lrm\" : 8206\n, \"rlm\" : 8207\n, \"ndash\" : 8211\n, \"mdash\" : 8212\n, \"lsquo\" : 8216\n, \"rsquo\" : 8217\n, \"sbquo\" : 8218\n, \"ldquo\" : 8220\n, \"rdquo\" : 8221\n, \"bdquo\" : 8222\n, \"dagger\" : 8224\n, \"Dagger\" : 8225\n, \"bull\" : 8226\n, \"hellip\" : 8230\n, \"permil\" : 8240\n, \"prime\" : 8242\n, \"Prime\" : 8243\n, \"lsaquo\" : 8249\n, \"rsaquo\" : 8250\n, \"oline\" : 8254\n, \"frasl\" : 8260\n, \"euro\" : 8364\n, \"image\" : 8465\n, \"weierp\" : 8472\n, \"real\" : 8476\n, \"trade\" : 8482\n, \"alefsym\" : 8501\n, \"larr\" : 8592\n, \"uarr\" : 8593\n, \"rarr\" : 8594\n, \"darr\" : 8595\n, \"harr\" : 8596\n, \"crarr\" : 8629\n, \"lArr\" : 8656\n, \"uArr\" : 8657\n, \"rArr\" : 8658\n, \"dArr\" : 8659\n, \"hArr\" : 8660\n, \"forall\" : 8704\n, \"part\" : 8706\n, \"exist\" : 8707\n, \"empty\" : 8709\n, \"nabla\" : 8711\n, \"isin\" : 8712\n, \"notin\" : 8713\n, \"ni\" : 8715\n, \"prod\" : 8719\n, \"sum\" : 8721\n, \"minus\" : 8722\n, \"lowast\" : 8727\n, \"radic\" : 8730\n, \"prop\" : 8733\n, \"infin\" : 8734\n, \"ang\" : 8736\n, \"and\" : 8743\n, \"or\" : 8744\n, \"cap\" : 8745\n, \"cup\" : 8746\n, \"int\" : 8747\n, \"there4\" : 8756\n, \"sim\" : 8764\n, \"cong\" : 8773\n, \"asymp\" : 8776\n, \"ne\" : 8800\n, \"equiv\" : 8801\n, \"le\" : 8804\n, \"ge\" : 8805\n, \"sub\" : 8834\n, \"sup\" : 8835\n, \"nsub\" : 8836\n, \"sube\" : 8838\n, \"supe\" : 8839\n, \"oplus\" : 8853\n, \"otimes\" : 8855\n, \"perp\" : 8869\n, \"sdot\" : 8901\n, \"lceil\" : 8968\n, \"rceil\" : 8969\n, \"lfloor\" : 8970\n, \"rfloor\" : 8971\n, \"lang\" : 9001\n, \"rang\" : 9002\n, \"loz\" : 9674\n, \"spades\" : 9824\n, \"clubs\" : 9827\n, \"hearts\" : 9829\n, \"diams\" : 9830\n}\n\nObject.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key]\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e\n    sax.ENTITIES[key] = s\n})\n\nfor (var S in sax.STATE) sax.STATE[sax.STATE[S]] = S\n\n// shorthand\nS = sax.STATE\n\nfunction emit (parser, event, data) {\n  parser[event] && parser[event](data)\n}\n\nfunction emitNode (parser, nodeType, data) {\n  if (parser.textNode) closeText(parser)\n  emit(parser, nodeType, data)\n}\n\nfunction closeText (parser) {\n  parser.textNode = textopts(parser.opt, parser.textNode)\n  if (parser.textNode) emit(parser, \"ontext\", parser.textNode)\n  parser.textNode = \"\"\n}\n\nfunction textopts (opt, text) {\n  if (opt.trim) text = text.trim()\n  if (opt.normalize) text = text.replace(/\\s+/g, \" \")\n  return text\n}\n\nfunction error (parser, er) {\n  closeText(parser)\n  if (parser.trackPosition) {\n    er += \"\\nLine: \"+parser.line+\n          \"\\nColumn: \"+parser.column+\n          \"\\nChar: \"+parser.c\n  }\n  er = new Error(er)\n  parser.error = er\n  emit(parser, \"onerror\", er)\n  return parser\n}\n\nfunction end (parser) {\n  if (!parser.closedRoot) strictFail(parser, \"Unclosed root tag\")\n  if ((parser.state !== S.BEGIN) && (parser.state !== S.TEXT)) error(parser, \"Unexpected end\")\n  closeText(parser)\n  parser.c = \"\"\n  parser.closed = true\n  emit(parser, \"onend\")\n  SAXParser.call(parser, parser.strict, parser.opt)\n  return parser\n}\n\nfunction strictFail (parser, message) {\n  if (typeof parser !== 'object' || !(parser instanceof SAXParser))\n    throw new Error('bad call to strictFail');\n  if (parser.strict) error(parser, message)\n}\n\nfunction newTag (parser) {\n  if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()\n  var parent = parser.tags[parser.tags.length - 1] || parser\n    , tag = parser.tag = { name : parser.tagName, attributes : {} }\n\n  // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n  if (parser.opt.xmlns) tag.ns = parent.ns\n  parser.attribList.length = 0\n}\n\nfunction qname (name, attribute) {\n  var i = name.indexOf(\":\")\n    , qualName = i < 0 ? [ \"\", name ] : name.split(\":\")\n    , prefix = qualName[0]\n    , local = qualName[1]\n\n  // <x \"xmlns\"=\"http://foo\">\n  if (attribute && name === \"xmlns\") {\n    prefix = \"xmlns\"\n    local = \"\"\n  }\n\n  return { prefix: prefix, local: local }\n}\n\nfunction attrib (parser) {\n  if (!parser.strict) parser.attribName = parser.attribName[parser.looseCase]()\n\n  if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n    return parser.attribName = parser.attribValue = \"\"\n  }\n\n  if (parser.opt.xmlns) {\n    var qn = qname(parser.attribName, true)\n      , prefix = qn.prefix\n      , local = qn.local\n\n    if (prefix === \"xmlns\") {\n      // namespace binding attribute; push the binding into scope\n      if (local === \"xml\" && parser.attribValue !== XML_NAMESPACE) {\n        strictFail( parser\n                  , \"xml: prefix must be bound to \" + XML_NAMESPACE + \"\\n\"\n                  + \"Actual: \" + parser.attribValue )\n      } else if (local === \"xmlns\" && parser.attribValue !== XMLNS_NAMESPACE) {\n        strictFail( parser\n                  , \"xmlns: prefix must be bound to \" + XMLNS_NAMESPACE + \"\\n\"\n                  + \"Actual: \" + parser.attribValue )\n      } else {\n        var tag = parser.tag\n          , parent = parser.tags[parser.tags.length - 1] || parser\n        if (tag.ns === parent.ns) {\n          tag.ns = Object.create(parent.ns)\n        }\n        tag.ns[local] = parser.attribValue\n      }\n    }\n\n    // defer onattribute events until all attributes have been seen\n    // so any new bindings can take effect; preserve attribute order\n    // so deferred events can be emitted in document order\n    parser.attribList.push([parser.attribName, parser.attribValue])\n  } else {\n    // in non-xmlns mode, we can emit the event right away\n    parser.tag.attributes[parser.attribName] = parser.attribValue\n    emitNode( parser\n            , \"onattribute\"\n            , { name: parser.attribName\n              , value: parser.attribValue } )\n  }\n\n  parser.attribName = parser.attribValue = \"\"\n}\n\nfunction openTag (parser, selfClosing) {\n  if (parser.opt.xmlns) {\n    // emit namespace binding events\n    var tag = parser.tag\n\n    // add namespace info to tag\n    var qn = qname(parser.tagName)\n    tag.prefix = qn.prefix\n    tag.local = qn.local\n    tag.uri = tag.ns[qn.prefix] || \"\"\n\n    if (tag.prefix && !tag.uri) {\n      strictFail(parser, \"Unbound namespace prefix: \"\n                       + JSON.stringify(parser.tagName))\n      tag.uri = qn.prefix\n    }\n\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    if (tag.ns && parent.ns !== tag.ns) {\n      Object.keys(tag.ns).forEach(function (p) {\n        emitNode( parser\n                , \"onopennamespace\"\n                , { prefix: p , uri: tag.ns[p] } )\n      })\n    }\n\n    // handle deferred onattribute events\n    // Note: do not apply default ns to attributes:\n    //   http://www.w3.org/TR/REC-xml-names/#defaulting\n    for (var i = 0, l = parser.attribList.length; i < l; i ++) {\n      var nv = parser.attribList[i]\n      var name = nv[0]\n        , value = nv[1]\n        , qualName = qname(name, true)\n        , prefix = qualName.prefix\n        , local = qualName.local\n        , uri = prefix == \"\" ? \"\" : (tag.ns[prefix] || \"\")\n        , a = { name: name\n              , value: value\n              , prefix: prefix\n              , local: local\n              , uri: uri\n              }\n\n      // if there's any attributes with an undefined namespace,\n      // then fail on them now.\n      if (prefix && prefix != \"xmlns\" && !uri) {\n        strictFail(parser, \"Unbound namespace prefix: \"\n                         + JSON.stringify(prefix))\n        a.uri = prefix\n      }\n      parser.tag.attributes[name] = a\n      emitNode(parser, \"onattribute\", a)\n    }\n    parser.attribList.length = 0\n  }\n\n  parser.tag.isSelfClosing = !!selfClosing\n\n  // process the tag\n  parser.sawRoot = true\n  parser.tags.push(parser.tag)\n  emitNode(parser, \"onopentag\", parser.tag)\n  if (!selfClosing) {\n    // special case for <script> in non-strict mode.\n    if (!parser.noscript && parser.tagName.toLowerCase() === \"script\") {\n      parser.state = S.SCRIPT\n    } else {\n      parser.state = S.TEXT\n    }\n    parser.tag = null\n    parser.tagName = \"\"\n  }\n  parser.attribName = parser.attribValue = \"\"\n  parser.attribList.length = 0\n}\n\nfunction closeTag (parser) {\n  if (!parser.tagName) {\n    strictFail(parser, \"Weird empty close tag.\")\n    parser.textNode += \"</>\"\n    parser.state = S.TEXT\n    return\n  }\n\n  if (parser.script) {\n    if (parser.tagName !== \"script\") {\n      parser.script += \"</\" + parser.tagName + \">\"\n      parser.tagName = \"\"\n      parser.state = S.SCRIPT\n      return\n    }\n    emitNode(parser, \"onscript\", parser.script)\n    parser.script = \"\"\n  }\n\n  // first make sure that the closing tag actually exists.\n  // <a><b></c></b></a> will close everything, otherwise.\n  var t = parser.tags.length\n  var tagName = parser.tagName\n  if (!parser.strict) tagName = tagName[parser.looseCase]()\n  var closeTo = tagName\n  while (t --) {\n    var close = parser.tags[t]\n    if (close.name !== closeTo) {\n      // fail the first time in strict mode\n      strictFail(parser, \"Unexpected close tag\")\n    } else break\n  }\n\n  // didn't find it.  we already failed for strict, so just abort.\n  if (t < 0) {\n    strictFail(parser, \"Unmatched closing tag: \"+parser.tagName)\n    parser.textNode += \"</\" + parser.tagName + \">\"\n    parser.state = S.TEXT\n    return\n  }\n  parser.tagName = tagName\n  var s = parser.tags.length\n  while (s --> t) {\n    var tag = parser.tag = parser.tags.pop()\n    parser.tagName = parser.tag.name\n    emitNode(parser, \"onclosetag\", parser.tagName)\n\n    var x = {}\n    for (var i in tag.ns) x[i] = tag.ns[i]\n\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    if (parser.opt.xmlns && tag.ns !== parent.ns) {\n      // remove namespace bindings introduced by tag\n      Object.keys(tag.ns).forEach(function (p) {\n        var n = tag.ns[p]\n        emitNode(parser, \"onclosenamespace\", { prefix: p, uri: n })\n      })\n    }\n  }\n  if (t === 0) parser.closedRoot = true\n  parser.tagName = parser.attribValue = parser.attribName = \"\"\n  parser.attribList.length = 0\n  parser.state = S.TEXT\n}\n\nfunction parseEntity (parser) {\n  var entity = parser.entity\n    , entityLC = entity.toLowerCase()\n    , num\n    , numStr = \"\"\n  if (parser.ENTITIES[entity])\n    return parser.ENTITIES[entity]\n  if (parser.ENTITIES[entityLC])\n    return parser.ENTITIES[entityLC]\n  entity = entityLC\n  if (entity.charAt(0) === \"#\") {\n    if (entity.charAt(1) === \"x\") {\n      entity = entity.slice(2)\n      num = parseInt(entity, 16)\n      numStr = num.toString(16)\n    } else {\n      entity = entity.slice(1)\n      num = parseInt(entity, 10)\n      numStr = num.toString(10)\n    }\n  }\n  entity = entity.replace(/^0+/, \"\")\n  if (numStr.toLowerCase() !== entity) {\n    strictFail(parser, \"Invalid character entity\")\n    return \"&\"+parser.entity + \";\"\n  }\n\n  return String.fromCodePoint(num)\n}\n\nfunction write (chunk) {\n  var parser = this\n  if (this.error) throw this.error\n  if (parser.closed) return error(parser,\n    \"Cannot write after close. Assign an onready handler.\")\n  if (chunk === null) return end(parser)\n  var i = 0, c = \"\"\n  while (parser.c = c = chunk.charAt(i++)) {\n    if (parser.trackPosition) {\n      parser.position ++\n      if (c === \"\\n\") {\n        parser.line ++\n        parser.column = 0\n      } else parser.column ++\n    }\n    switch (parser.state) {\n\n      case S.BEGIN:\n        if (c === \"<\") {\n          parser.state = S.OPEN_WAKA\n          parser.startTagPosition = parser.position\n        } else if (not(whitespace,c)) {\n          // have to process this as a text node.\n          // weird, but happens.\n          strictFail(parser, \"Non-whitespace before first tag.\")\n          parser.textNode = c\n          parser.state = S.TEXT\n        }\n      continue\n\n      case S.TEXT:\n        if (parser.sawRoot && !parser.closedRoot) {\n          var starti = i-1\n          while (c && c!==\"<\" && c!==\"&\") {\n            c = chunk.charAt(i++)\n            if (c && parser.trackPosition) {\n              parser.position ++\n              if (c === \"\\n\") {\n                parser.line ++\n                parser.column = 0\n              } else parser.column ++\n            }\n          }\n          parser.textNode += chunk.substring(starti, i-1)\n        }\n        if (c === \"<\") {\n          parser.state = S.OPEN_WAKA\n          parser.startTagPosition = parser.position\n        } else {\n          if (not(whitespace, c) && (!parser.sawRoot || parser.closedRoot))\n            strictFail(parser, \"Text data outside of root node.\")\n          if (c === \"&\") parser.state = S.TEXT_ENTITY\n          else parser.textNode += c\n        }\n      continue\n\n      case S.SCRIPT:\n        // only non-strict\n        if (c === \"<\") {\n          parser.state = S.SCRIPT_ENDING\n        } else parser.script += c\n      continue\n\n      case S.SCRIPT_ENDING:\n        if (c === \"/\") {\n          parser.state = S.CLOSE_TAG\n        } else {\n          parser.script += \"<\" + c\n          parser.state = S.SCRIPT\n        }\n      continue\n\n      case S.OPEN_WAKA:\n        // either a /, ?, !, or text is coming next.\n        if (c === \"!\") {\n          parser.state = S.SGML_DECL\n          parser.sgmlDecl = \"\"\n        } else if (is(whitespace, c)) {\n          // wait for it...\n        } else if (is(nameStart,c)) {\n          parser.state = S.OPEN_TAG\n          parser.tagName = c\n        } else if (c === \"/\") {\n          parser.state = S.CLOSE_TAG\n          parser.tagName = \"\"\n        } else if (c === \"?\") {\n          parser.state = S.PROC_INST\n          parser.procInstName = parser.procInstBody = \"\"\n        } else {\n          strictFail(parser, \"Unencoded <\")\n          // if there was some whitespace, then add that in.\n          if (parser.startTagPosition + 1 < parser.position) {\n            var pad = parser.position - parser.startTagPosition\n            c = new Array(pad).join(\" \") + c\n          }\n          parser.textNode += \"<\" + c\n          parser.state = S.TEXT\n        }\n      continue\n\n      case S.SGML_DECL:\n        if ((parser.sgmlDecl+c).toUpperCase() === CDATA) {\n          emitNode(parser, \"onopencdata\")\n          parser.state = S.CDATA\n          parser.sgmlDecl = \"\"\n          parser.cdata = \"\"\n        } else if (parser.sgmlDecl+c === \"--\") {\n          parser.state = S.COMMENT\n          parser.comment = \"\"\n          parser.sgmlDecl = \"\"\n        } else if ((parser.sgmlDecl+c).toUpperCase() === DOCTYPE) {\n          parser.state = S.DOCTYPE\n          if (parser.doctype || parser.sawRoot) strictFail(parser,\n            \"Inappropriately located doctype declaration\")\n          parser.doctype = \"\"\n          parser.sgmlDecl = \"\"\n        } else if (c === \">\") {\n          emitNode(parser, \"onsgmldeclaration\", parser.sgmlDecl)\n          parser.sgmlDecl = \"\"\n          parser.state = S.TEXT\n        } else if (is(quote, c)) {\n          parser.state = S.SGML_DECL_QUOTED\n          parser.sgmlDecl += c\n        } else parser.sgmlDecl += c\n      continue\n\n      case S.SGML_DECL_QUOTED:\n        if (c === parser.q) {\n          parser.state = S.SGML_DECL\n          parser.q = \"\"\n        }\n        parser.sgmlDecl += c\n      continue\n\n      case S.DOCTYPE:\n        if (c === \">\") {\n          parser.state = S.TEXT\n          emitNode(parser, \"ondoctype\", parser.doctype)\n          parser.doctype = true // just remember that we saw it.\n        } else {\n          parser.doctype += c\n          if (c === \"[\") parser.state = S.DOCTYPE_DTD\n          else if (is(quote, c)) {\n            parser.state = S.DOCTYPE_QUOTED\n            parser.q = c\n          }\n        }\n      continue\n\n      case S.DOCTYPE_QUOTED:\n        parser.doctype += c\n        if (c === parser.q) {\n          parser.q = \"\"\n          parser.state = S.DOCTYPE\n        }\n      continue\n\n      case S.DOCTYPE_DTD:\n        parser.doctype += c\n        if (c === \"]\") parser.state = S.DOCTYPE\n        else if (is(quote,c)) {\n          parser.state = S.DOCTYPE_DTD_QUOTED\n          parser.q = c\n        }\n      continue\n\n      case S.DOCTYPE_DTD_QUOTED:\n        parser.doctype += c\n        if (c === parser.q) {\n          parser.state = S.DOCTYPE_DTD\n          parser.q = \"\"\n        }\n      continue\n\n      case S.COMMENT:\n        if (c === \"-\") parser.state = S.COMMENT_ENDING\n        else parser.comment += c\n      continue\n\n      case S.COMMENT_ENDING:\n        if (c === \"-\") {\n          parser.state = S.COMMENT_ENDED\n          parser.comment = textopts(parser.opt, parser.comment)\n          if (parser.comment) emitNode(parser, \"oncomment\", parser.comment)\n          parser.comment = \"\"\n        } else {\n          parser.comment += \"-\" + c\n          parser.state = S.COMMENT\n        }\n      continue\n\n      case S.COMMENT_ENDED:\n        if (c !== \">\") {\n          strictFail(parser, \"Malformed comment\")\n          // allow <!-- blah -- bloo --> in non-strict mode,\n          // which is a comment of \" blah -- bloo \"\n          parser.comment += \"--\" + c\n          parser.state = S.COMMENT\n        } else parser.state = S.TEXT\n      continue\n\n      case S.CDATA:\n        if (c === \"]\") parser.state = S.CDATA_ENDING\n        else parser.cdata += c\n      continue\n\n      case S.CDATA_ENDING:\n        if (c === \"]\") parser.state = S.CDATA_ENDING_2\n        else {\n          parser.cdata += \"]\" + c\n          parser.state = S.CDATA\n        }\n      continue\n\n      case S.CDATA_ENDING_2:\n        if (c === \">\") {\n          if (parser.cdata) emitNode(parser, \"oncdata\", parser.cdata)\n          emitNode(parser, \"onclosecdata\")\n          parser.cdata = \"\"\n          parser.state = S.TEXT\n        } else if (c === \"]\") {\n          parser.cdata += \"]\"\n        } else {\n          parser.cdata += \"]]\" + c\n          parser.state = S.CDATA\n        }\n      continue\n\n      case S.PROC_INST:\n        if (c === \"?\") parser.state = S.PROC_INST_ENDING\n        else if (is(whitespace, c)) parser.state = S.PROC_INST_BODY\n        else parser.procInstName += c\n      continue\n\n      case S.PROC_INST_BODY:\n        if (!parser.procInstBody && is(whitespace, c)) continue\n        else if (c === \"?\") parser.state = S.PROC_INST_ENDING\n        else parser.procInstBody += c\n      continue\n\n      case S.PROC_INST_ENDING:\n        if (c === \">\") {\n          emitNode(parser, \"onprocessinginstruction\", {\n            name : parser.procInstName,\n            body : parser.procInstBody\n          })\n          parser.procInstName = parser.procInstBody = \"\"\n          parser.state = S.TEXT\n        } else {\n          parser.procInstBody += \"?\" + c\n          parser.state = S.PROC_INST_BODY\n        }\n      continue\n\n      case S.OPEN_TAG:\n        if (is(nameBody, c)) parser.tagName += c\n        else {\n          newTag(parser)\n          if (c === \">\") openTag(parser)\n          else if (c === \"/\") parser.state = S.OPEN_TAG_SLASH\n          else {\n            if (not(whitespace, c)) strictFail(\n              parser, \"Invalid character in tag name\")\n            parser.state = S.ATTRIB\n          }\n        }\n      continue\n\n      case S.OPEN_TAG_SLASH:\n        if (c === \">\") {\n          openTag(parser, true)\n          closeTag(parser)\n        } else {\n          strictFail(parser, \"Forward-slash in opening tag not followed by >\")\n          parser.state = S.ATTRIB\n        }\n      continue\n\n      case S.ATTRIB:\n        // haven't read the attribute name yet.\n        if (is(whitespace, c)) continue\n        else if (c === \">\") openTag(parser)\n        else if (c === \"/\") parser.state = S.OPEN_TAG_SLASH\n        else if (is(nameStart, c)) {\n          parser.attribName = c\n          parser.attribValue = \"\"\n          parser.state = S.ATTRIB_NAME\n        } else strictFail(parser, \"Invalid attribute name\")\n      continue\n\n      case S.ATTRIB_NAME:\n        if (c === \"=\") parser.state = S.ATTRIB_VALUE\n        else if (c === \">\") {\n          strictFail(parser, \"Attribute without value\")\n          parser.attribValue = parser.attribName\n          attrib(parser)\n          openTag(parser)\n        }\n        else if (is(whitespace, c)) parser.state = S.ATTRIB_NAME_SAW_WHITE\n        else if (is(nameBody, c)) parser.attribName += c\n        else strictFail(parser, \"Invalid attribute name\")\n      continue\n\n      case S.ATTRIB_NAME_SAW_WHITE:\n        if (c === \"=\") parser.state = S.ATTRIB_VALUE\n        else if (is(whitespace, c)) continue\n        else {\n          strictFail(parser, \"Attribute without value\")\n          parser.tag.attributes[parser.attribName] = \"\"\n          parser.attribValue = \"\"\n          emitNode(parser, \"onattribute\",\n                   { name : parser.attribName, value : \"\" })\n          parser.attribName = \"\"\n          if (c === \">\") openTag(parser)\n          else if (is(nameStart, c)) {\n            parser.attribName = c\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, \"Invalid attribute name\")\n            parser.state = S.ATTRIB\n          }\n        }\n      continue\n\n      case S.ATTRIB_VALUE:\n        if (is(whitespace, c)) continue\n        else if (is(quote, c)) {\n          parser.q = c\n          parser.state = S.ATTRIB_VALUE_QUOTED\n        } else {\n          strictFail(parser, \"Unquoted attribute value\")\n          parser.state = S.ATTRIB_VALUE_UNQUOTED\n          parser.attribValue = c\n        }\n      continue\n\n      case S.ATTRIB_VALUE_QUOTED:\n        if (c !== parser.q) {\n          if (c === \"&\") parser.state = S.ATTRIB_VALUE_ENTITY_Q\n          else parser.attribValue += c\n          continue\n        }\n        attrib(parser)\n        parser.q = \"\"\n        parser.state = S.ATTRIB_VALUE_CLOSED\n      continue\n\n      case S.ATTRIB_VALUE_CLOSED:\n        if (is(whitespace, c)) {\n          parser.state = S.ATTRIB\n        } else if (c === \">\") openTag(parser)\n        else if (c === \"/\") parser.state = S.OPEN_TAG_SLASH\n        else if (is(nameStart, c)) {\n          strictFail(parser, \"No whitespace between attributes\")\n          parser.attribName = c\n          parser.attribValue = \"\"\n          parser.state = S.ATTRIB_NAME\n        } else strictFail(parser, \"Invalid attribute name\")\n      continue\n\n      case S.ATTRIB_VALUE_UNQUOTED:\n        if (not(attribEnd,c)) {\n          if (c === \"&\") parser.state = S.ATTRIB_VALUE_ENTITY_U\n          else parser.attribValue += c\n          continue\n        }\n        attrib(parser)\n        if (c === \">\") openTag(parser)\n        else parser.state = S.ATTRIB\n      continue\n\n      case S.CLOSE_TAG:\n        if (!parser.tagName) {\n          if (is(whitespace, c)) continue\n          else if (not(nameStart, c)) {\n            if (parser.script) {\n              parser.script += \"</\" + c\n              parser.state = S.SCRIPT\n            } else {\n              strictFail(parser, \"Invalid tagname in closing tag.\")\n            }\n          } else parser.tagName = c\n        }\n        else if (c === \">\") closeTag(parser)\n        else if (is(nameBody, c)) parser.tagName += c\n        else if (parser.script) {\n          parser.script += \"</\" + parser.tagName\n          parser.tagName = \"\"\n          parser.state = S.SCRIPT\n        } else {\n          if (not(whitespace, c)) strictFail(parser,\n            \"Invalid tagname in closing tag\")\n          parser.state = S.CLOSE_TAG_SAW_WHITE\n        }\n      continue\n\n      case S.CLOSE_TAG_SAW_WHITE:\n        if (is(whitespace, c)) continue\n        if (c === \">\") closeTag(parser)\n        else strictFail(parser, \"Invalid characters in closing tag\")\n      continue\n\n      case S.TEXT_ENTITY:\n      case S.ATTRIB_VALUE_ENTITY_Q:\n      case S.ATTRIB_VALUE_ENTITY_U:\n        switch(parser.state) {\n          case S.TEXT_ENTITY:\n            var returnState = S.TEXT, buffer = \"textNode\"\n          break\n\n          case S.ATTRIB_VALUE_ENTITY_Q:\n            var returnState = S.ATTRIB_VALUE_QUOTED, buffer = \"attribValue\"\n          break\n\n          case S.ATTRIB_VALUE_ENTITY_U:\n            var returnState = S.ATTRIB_VALUE_UNQUOTED, buffer = \"attribValue\"\n          break\n        }\n        if (c === \";\") {\n          parser[buffer] += parseEntity(parser)\n          parser.entity = \"\"\n          parser.state = returnState\n        }\n        else if (is(entity, c)) parser.entity += c\n        else {\n          strictFail(parser, \"Invalid character entity\")\n          parser[buffer] += \"&\" + parser.entity + c\n          parser.entity = \"\"\n          parser.state = returnState\n        }\n      continue\n\n      default:\n        throw new Error(parser, \"Unknown state: \" + parser.state)\n    }\n  } // while\n  // cdata blocks can get very big under normal conditions. emit and move on.\n  // if (parser.state === S.CDATA && parser.cdata) {\n  //   emitNode(parser, \"oncdata\", parser.cdata)\n  //   parser.cdata = \"\"\n  // }\n  if (parser.position >= parser.bufferCheckPosition) checkBufferLength(parser)\n  return parser\n}\n\n/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\nif (!String.fromCodePoint) {\n        (function() {\n                var stringFromCharCode = String.fromCharCode;\n                var floor = Math.floor;\n                var fromCodePoint = function() {\n                        var MAX_SIZE = 0x4000;\n                        var codeUnits = [];\n                        var highSurrogate;\n                        var lowSurrogate;\n                        var index = -1;\n                        var length = arguments.length;\n                        if (!length) {\n                                return '';\n                        }\n                        var result = '';\n                        while (++index < length) {\n                                var codePoint = Number(arguments[index]);\n                                if (\n                                        !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n                                        codePoint < 0 || // not a valid Unicode code point\n                                        codePoint > 0x10FFFF || // not a valid Unicode code point\n                                        floor(codePoint) != codePoint // not an integer\n                                ) {\n                                        throw RangeError('Invalid code point: ' + codePoint);\n                                }\n                                if (codePoint <= 0xFFFF) { // BMP code point\n                                        codeUnits.push(codePoint);\n                                } else { // Astral code point; split in surrogate halves\n                                        // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n                                        codePoint -= 0x10000;\n                                        highSurrogate = (codePoint >> 10) + 0xD800;\n                                        lowSurrogate = (codePoint % 0x400) + 0xDC00;\n                                        codeUnits.push(highSurrogate, lowSurrogate);\n                                }\n                                if (index + 1 == length || codeUnits.length > MAX_SIZE) {\n                                        result += stringFromCharCode.apply(null, codeUnits);\n                                        codeUnits.length = 0;\n                                }\n                        }\n                        return result;\n                };\n                if (Object.defineProperty) {\n                        Object.defineProperty(String, 'fromCodePoint', {\n                                'value': fromCodePoint,\n                                'configurable': true,\n                                'writable': true\n                        });\n                } else {\n                        String.fromCodePoint = fromCodePoint;\n                }\n        }());\n}\n\n})(typeof exports === \"undefined\" ? sax = {} : exports);\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/sax/lib/sax.js","module.exports = require(\"stream\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"stream\"\n// module id = 49\n// module chunks = 0","module.exports = require(\"string_decoder\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"string_decoder\"\n// module id = 50\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_51__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"moddle\",\"commonjs2\":\"moddle\",\"amd\":\"moddle\",\"root\":\"Moddle\"}\n// module id = 51\n// module chunks = 0","import {\n  map,\n  forEach,\n  isString,\n  filter,\n  assign\n} from 'lodash-es';\n\nimport {\n  isSimple as isSimpleType\n} from 'moddle/lib/types';\n\nimport {\n  parseName as parseNameNs\n} from 'moddle/lib/ns';\n\nimport {\n  XSI_TYPE,\n  DEFAULT_NS_MAP,\n  nameToAlias,\n  serializeAsType,\n  serializeAsProperty\n} from './common';\n\nconst XML_PREAMBLE = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n';\nconst ESCAPE_CHARS = /(<|>|'|\"|&|\\n\\r|\\n)/g;\n\n\nfunction nsName(ns) {\n  if (isString(ns)) {\n    return ns;\n  } else {\n    return (ns.prefix ? ns.prefix + ':' : '') + ns.localName;\n  }\n}\n\nfunction getNsAttrs(namespaces) {\n\n  function isUsed(ns) {\n    return namespaces.used[ns.uri];\n  }\n\n  function toAttr(ns) {\n    var name = 'xmlns' + (ns.prefix ? ':' + ns.prefix : '');\n    return { name: name, value: ns.uri };\n  }\n\n  var allNs = [].concat(namespaces.wellknown, namespaces.custom);\n\n  return map(filter(allNs, isUsed), toAttr);\n}\n\nfunction getElementNs(ns, descriptor) {\n  if (descriptor.isGeneric) {\n    return descriptor.name;\n  } else {\n    return assign({ localName: nameToAlias(descriptor.ns.localName, descriptor.$pkg) }, ns);\n  }\n}\n\nfunction getPropertyNs(ns, descriptor) {\n  return assign({ localName: descriptor.ns.localName }, ns);\n}\n\nfunction getSerializableProperties(element) {\n  var descriptor = element.$descriptor;\n\n  return filter(descriptor.properties, function(p) {\n    var name = p.name;\n\n    if (p.isVirtual) {\n      return false;\n    }\n\n    // do not serialize defaults\n    if (!element.hasOwnProperty(name)) {\n      return false;\n    }\n\n    var value = element[name];\n\n    // do not serialize default equals\n    if (value === p.default) {\n      return false;\n    }\n\n    // do not serialize null properties\n    if (value === null) {\n      return false;\n    }\n\n    return p.isMany ? value.length : true;\n  });\n}\n\nconst ESCAPE_MAP = {\n  '\\n': '10',\n  '\\n\\r': '10',\n  '\"': '34',\n  '\\'': '39',\n  '<': '60',\n  '>': '62',\n  '&': '38'\n};\n\n/**\n * Escape a string attribute to not contain any bad values (line breaks, '\"', ...)\n *\n * @param {String} str the string to escape\n * @return {String} the escaped string\n */\nfunction escapeAttr(str) {\n\n  // ensure we are handling strings here\n  str = isString(str) ? str : '' + str;\n\n  return str.replace(ESCAPE_CHARS, function(str) {\n    return '&#' + ESCAPE_MAP[str] + ';';\n  });\n}\n\nfunction filterAttributes(props) {\n  return filter(props, function(p) { return p.isAttr; });\n}\n\nfunction filterContained(props) {\n  return filter(props, function(p) { return !p.isAttr; });\n}\n\n\n/**\n * Serializer for references.\n */\nclass ReferenceSerializer {\n\n  constructor(parent, ns) {\n    this.ns = ns;\n  }\n\n  build(element) {\n    this.element = element;\n    return this;\n  }\n\n  serializeTo(writer) {\n    writer\n      .appendIndent()\n      .append('<' + nsName(this.ns) + '>' + this.element.id + '</' + nsName(this.ns) + '>')\n      .appendNewLine();\n  }\n\n}\n\n/**\n * Serializer for body text.\n */\nclass BodySerializer {\n\n  serializeTo(writer) {\n    this.serializeValue(writer);\n  }\n\n  serializeValue(writer) {\n    var escape = this.escape;\n\n    if (escape) {\n      writer.append('<![CDATA[');\n    }\n\n    writer.append(this.value);\n\n    if (escape) {\n      writer.append(']]>');\n    }\n  }\n\n  build(prop, value) {\n    this.value = value;\n\n    if (prop.type === 'String' && value.search(ESCAPE_CHARS) !== -1) {\n      this.escape = true;\n    }\n\n    return this;\n  }\n\n}\n\n\n/**\n * Serializer for a value.\n */\nclass ValueSerializer extends BodySerializer {\n\n  constructor(ns) {\n    super();\n\n    this.ns = ns;\n  }\n\n  serializeTo(writer) {\n\n    writer\n      .appendIndent()\n      .append('<' + nsName(this.ns) + '>');\n\n    this.serializeValue(writer);\n\n    writer\n      .append('</' + nsName(this.ns) + '>')\n      .appendNewLine();\n  }\n\n}\n\n\n/**\n * Serializer for an element tag.\n */\nclass ElementSerializer {\n\n  constructor(parent, ns) {\n    this.body = [];\n    this.attrs = [];\n\n    this.parent = parent;\n    this.ns = ns;\n  }\n\n\n  build(element) {\n    this.element = element;\n\n    var otherAttrs = this.parseNsAttributes(element);\n\n    if (!this.ns) {\n      this.ns = this.nsTagName(element.$descriptor);\n    }\n\n    if (element.$descriptor.isGeneric) {\n      this.parseGeneric(element);\n    } else {\n      var properties = getSerializableProperties(element);\n\n      this.parseAttributes(filterAttributes(properties));\n      this.parseContainments(filterContained(properties));\n\n      this.parseGenericAttributes(element, otherAttrs);\n    }\n\n    return this;\n  }\n\n  nsTagName(descriptor) {\n    var effectiveNs = this.logNamespaceUsed(descriptor.ns);\n    return getElementNs(effectiveNs, descriptor);\n  }\n\n  nsPropertyTagName(descriptor) {\n    var effectiveNs = this.logNamespaceUsed(descriptor.ns);\n    return getPropertyNs(effectiveNs, descriptor);\n  }\n\n  isLocalNs(ns) {\n    return ns.uri === this.ns.uri;\n  }\n\n  /**\n   * Get the actual ns attribute name for the given element.\n   *\n   * @param {Object} element\n   * @param {Boolean} [inherited=false]\n   *\n   * @return {Object} nsName\n   */\n  nsAttributeName(element) {\n\n    var ns;\n\n    if (isString(element)) {\n      ns = parseNameNs(element);\n    } else {\n      ns = element.ns;\n    }\n\n    // return just local name for inherited attributes\n    if (element.inherited) {\n      return { localName: ns.localName };\n    }\n\n    // parse + log effective ns\n    var effectiveNs = this.logNamespaceUsed(ns);\n\n    // strip prefix if same namespace like parent\n    if (this.isLocalNs(effectiveNs)) {\n      return { localName: ns.localName };\n    } else {\n      return assign({ localName: ns.localName }, effectiveNs);\n    }\n  }\n\n  parseGeneric(element) {\n\n    var self = this,\n        body = this.body,\n        attrs = this.attrs;\n\n    forEach(element, function(val, key) {\n\n      if (key === '$body') {\n        body.push(new BodySerializer().build({ type: 'String' }, val));\n      } else\n      if (key === '$children') {\n        forEach(val, function(child) {\n          body.push(new ElementSerializer(self).build(child));\n        });\n      } else\n      if (key.indexOf('$') !== 0) {\n        attrs.push({ name: key, value: escapeAttr(val) });\n      }\n    });\n  }\n\n  /**\n   * Parse namespaces and return a list of left over generic attributes\n   *\n   * @param  {Object} element\n   * @return {Array<Object>}\n   */\n  parseNsAttributes(element) {\n    var self = this;\n\n    var genericAttrs = element.$attrs;\n\n    var model = element.$model;\n\n    var attributes = [];\n\n    // parse namespace attributes first\n    // and log them. push non namespace attributes to a list\n    // and process them later\n    forEach(genericAttrs, function(value, name) {\n      var nameNs = parseNameNs(name);\n\n      var ns;\n\n      // parse xmlns:foo=\"http://foo.bar\"\n      if (nameNs.prefix === 'xmlns') {\n        ns = { prefix: nameNs.localName, uri: value };\n      }\n\n      // parse xmlns=\"http://foo.bar\"\n      if (!nameNs.prefix && nameNs.localName === 'xmlns') {\n        ns = { uri: value };\n      }\n\n      if (ns) {\n        if (model.getPackage(value)) {\n          // register well known namespace\n          self.logNamespace(ns, true);\n        } else {\n          // log custom namespace directly as used\n          self.logNamespaceUsed(ns);\n        }\n      } else {\n        attributes.push({ name: name, value: value });\n      }\n    });\n\n    return attributes;\n  }\n\n  parseGenericAttributes(element, attributes) {\n\n    var self = this;\n\n    forEach(attributes, function(attr) {\n\n      // do not serialize xsi:type attribute\n      // it is set manually based on the actual implementation type\n      if (attr.name === XSI_TYPE) {\n        return;\n      }\n\n      try {\n        self.addAttribute(self.nsAttributeName(attr.name), attr.value);\n      } catch (e) {\n        console.warn(\n          'missing namespace information for ',\n          attr.name, '=', attr.value, 'on', element,\n          e);\n      }\n    });\n  }\n\n  parseContainments(properties) {\n\n    var self = this,\n        body = this.body,\n        element = this.element;\n\n    forEach(properties, function(p) {\n      var value = element.get(p.name),\n          isReference = p.isReference,\n          isMany = p.isMany;\n\n      var ns = self.nsPropertyTagName(p);\n\n      if (!isMany) {\n        value = [ value ];\n      }\n\n      if (p.isBody) {\n        body.push(new BodySerializer().build(p, value[0]));\n      } else\n      if (isSimpleType(p.type)) {\n        forEach(value, function(v) {\n          body.push(new ValueSerializer(ns).build(p, v));\n        });\n      } else\n      if (isReference) {\n        forEach(value, function(v) {\n          body.push(new ReferenceSerializer(self, ns).build(v));\n        });\n      } else {\n        // allow serialization via type\n        // rather than element name\n        var asType = serializeAsType(p),\n            asProperty = serializeAsProperty(p);\n\n        forEach(value, function(v) {\n          var serializer;\n\n          if (asType) {\n            serializer = new TypeSerializer(self, ns);\n          } else\n          if (asProperty) {\n            serializer = new ElementSerializer(self, ns);\n          } else {\n            serializer = new ElementSerializer(self);\n          }\n\n          body.push(serializer.build(v));\n        });\n      }\n    });\n  }\n\n  getNamespaces() {\n\n    var namespaces = this.namespaces,\n        parent = this.parent;\n\n    if (!namespaces) {\n      namespaces = this.namespaces = parent ? parent.getNamespaces() : {\n        prefixMap: {},\n        uriMap: {},\n        used: {},\n        wellknown: [],\n        custom: []\n      };\n    }\n\n    return namespaces;\n  }\n\n  logNamespace(ns, wellknown) {\n    var namespaces = this.getNamespaces();\n\n    var nsUri = ns.uri;\n\n    var existing = namespaces.uriMap[nsUri];\n\n    if (!existing) {\n      namespaces.uriMap[nsUri] = ns;\n\n      if (wellknown) {\n        namespaces.wellknown.push(ns);\n      } else {\n        namespaces.custom.push(ns);\n      }\n    }\n\n    namespaces.prefixMap[ns.prefix] = nsUri;\n\n    return ns;\n  }\n\n  logNamespaceUsed(ns) {\n    var element = this.element,\n        model = element.$model,\n        namespaces = this.getNamespaces();\n\n    // ns may be\n    //\n    //   * prefix only\n    //   * prefix:uri\n\n    var prefix = ns.prefix;\n\n    var wellknownUri = DEFAULT_NS_MAP[prefix] || model && (model.getPackage(prefix) || {}).uri;\n\n    var uri = ns.uri || namespaces.prefixMap[prefix] || wellknownUri;\n\n    if (!uri) {\n      throw new Error('no namespace uri given for prefix <' + ns.prefix + '>');\n    }\n\n    ns = namespaces.uriMap[uri];\n\n    if (!ns) {\n      ns = this.logNamespace({ prefix: prefix, uri: uri }, wellknownUri);\n    }\n\n    if (!namespaces.used[ns.uri]) {\n      namespaces.used[ns.uri] = ns;\n    }\n\n    return ns;\n  }\n\n  parseAttributes(properties) {\n    var self = this,\n        element = this.element;\n\n    forEach(properties, function(p) {\n\n      var value = element.get(p.name);\n\n      if (p.isReference) {\n\n        if (!p.isMany) {\n          value = value.id;\n        }\n        else {\n          var values = [];\n          forEach(value, function(v) {\n            values.push(v.id);\n          });\n          // IDREFS is a whitespace-separated list of references.\n          value = values.join(' ');\n        }\n\n      }\n\n      self.addAttribute(self.nsAttributeName(p), value);\n    });\n  }\n\n  addAttribute(name, value) {\n    var attrs = this.attrs;\n\n    if (isString(value)) {\n      value = escapeAttr(value);\n    }\n\n    attrs.push({ name: name, value: value });\n  }\n\n  serializeAttributes(writer) {\n    var attrs = this.attrs,\n        root = !this.parent;\n\n    if (root) {\n      attrs = getNsAttrs(this.namespaces).concat(attrs);\n    }\n\n    forEach(attrs, function(a) {\n      writer\n        .append(' ')\n        .append(nsName(a.name)).append('=\"').append(a.value).append('\"');\n    });\n  }\n\n  serializeTo(writer) {\n    var firstBody = this.body[0],\n        indent = firstBody && firstBody.constructor !== BodySerializer;\n\n    writer\n      .appendIndent()\n      .append('<' + nsName(this.ns));\n\n    this.serializeAttributes(writer);\n\n    writer.append(firstBody ? '>' : ' />');\n\n    if (firstBody) {\n\n      if (indent) {\n        writer\n          .appendNewLine()\n          .indent();\n      }\n\n      forEach(this.body, function(b) {\n        b.serializeTo(writer);\n      });\n\n      if (indent) {\n        writer\n          .unindent()\n          .appendIndent();\n      }\n\n      writer.append('</' + nsName(this.ns) + '>');\n    }\n\n    writer.appendNewLine();\n  }\n\n}\n\n\n/**\n * A serializer for data types\n */\nclass TypeSerializer extends ElementSerializer {\n\n  build(element) {\n    var descriptor = element.$descriptor;\n\n    this.element = element;\n\n    this.typeNs = this.nsTagName(descriptor);\n\n    // add xsi:type attribute to represent the elements\n    // actual type\n\n    var typeNs = this.typeNs,\n        pkg = element.$model.getPackage(typeNs.uri),\n        typePrefix = (pkg.xml && pkg.xml.typePrefix) || '';\n\n    this.addAttribute(this.nsAttributeName(XSI_TYPE),\n      (typeNs.prefix ? typeNs.prefix + ':' : '') +\n      typePrefix + descriptor.ns.localName);\n\n    // do the usual stuff\n    return super.build(element);\n  }\n\n  isLocalNs(ns) {\n    return ns.uri === this.typeNs.uri;\n  }\n\n}\n\n\nclass SavingWriter {\n\n  constructor() {\n    this.value = '';\n  }\n\n  write(str) {\n    this.value += str;\n  }\n\n}\n\n\n/**\n * A writer that (optionally) formats the output.\n */\nclass FormatingWriter {\n\n  constructor(out, format) {\n    this.out = out;\n    this.format = format;\n\n    this.prefix = [ '' ];\n  }\n\n  append(str) {\n    this.out.write(str);\n\n    return this;\n  }\n\n  appendNewLine() {\n    if (this.format) {\n      this.out.write('\\n');\n    }\n\n    return this;\n  }\n\n  appendIndent() {\n    if (this.format) {\n      this.out.write(this.prefix.join('  '));\n    }\n\n    return this;\n  }\n\n  indent() {\n    this.prefix.push('');\n    return this;\n  }\n\n  unindent() {\n    this.prefix.pop();\n    return this;\n  }\n\n}\n\n\n/**\n * A writer for meta-model backed document trees\n *\n * @param {Object} options output options to pass into the writer\n */\nexport default class XMLWriter {\n\n  constructor(options) {\n    this.options = assign({ format: false, preamble: true }, options || {});\n  }\n\n  /**\n   * Serialize the tree into the passed writer or\n   * return it as a String.\n   *\n   * @param {ModdleElement} tree\n   * @param {SavingWriter} [writer]\n   *\n   * @return {String} result\n   */\n  toXML(tree, writer) {\n    var internalWriter = writer || new SavingWriter();\n    var formatingWriter = new FormatingWriter(internalWriter, this.options.format);\n\n    if (this.options.preamble) {\n      formatingWriter.append(XML_PREAMBLE);\n    }\n\n    new ElementSerializer().build(tree).serializeTo(formatingWriter);\n\n    if (!writer) {\n      return internalWriter.value;\n    }\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./lib/writer.js","import arrayFilter from './_arrayFilter.js';\nimport baseFilter from './_baseFilter.js';\nimport baseIteratee from './_baseIteratee.js';\nimport isArray from './isArray.js';\n\n/**\n * Iterates over elements of `collection`, returning an array of all elements\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * **Note:** Unlike `_.remove`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.reject\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': true },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * _.filter(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.filter(users, { 'age': 36, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.filter(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.filter(users, 'active');\n * // => objects for ['barney']\n */\nfunction filter(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nexport default filter;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/filter.js","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_arrayFilter.js","import baseEach from './_baseEach.js';\n\n/**\n * The base implementation of `_.filter` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction baseFilter(collection, predicate) {\n  var result = [];\n  baseEach(collection, function(value, index, collection) {\n    if (predicate(value, index, collection)) {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nexport default baseFilter;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_baseFilter.js","import baseGetTag from './_baseGetTag.js';\nimport isArray from './isArray.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nexport default isString;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/isString.js","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/isObjectLike.js","import arrayMap from './_arrayMap.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseMap from './_baseMap.js';\nimport isArray from './isArray.js';\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nexport default map;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/map.js","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_arrayMap.js","import baseEach from './_baseEach.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nexport default baseMap;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lodash-es/_baseMap.js"],"sourceRoot":""}